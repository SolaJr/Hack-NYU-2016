var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

function TickerScrambler(e,t){function n(){h=setTimeout(r,c)}function r(){m?(g=e.textContent.length-1,h=setInterval(a,u),m=!1):(g=0,h=setInterval(o,u),m=!0)}function i(){return d?Math.floor(p.length*Math.random()):l<p.length-1?l+1:0}function o(){var t,n;if(g<p[l].length){var o=p[l].substr(g,1);t=e.textContent.length-g-1,n=s(t),e.textContent=e.textContent.substr(0,g)+o+n,g++}else g<e.textContent.length&&(t=e.textContent.length-p[l].length-1,n=s(t),e.textContent=e.textContent.substr(0,p[l].length)+n,e.textContent.length==p[l].length&&g++);g>=p[l].length&&g>=e.textContent.length&&(g=0,l=i(),clearInterval(h),setTimeout(r,c))}function a(){var t=e.textContent.length-g,n=s(t);e.textContent=e.textContent.substr(0,g)+n,g--,0===g&&(clearInterval(h),r())}function s(e){for(var t="",n=0;e>n;n++)t+=f.charAt(Math.floor(Math.random()*f.length));return t}if(e&&1==e.nodeType&&t&&t.list&&t.list.length){var l=t.index||0,u=t.speed||33,c=t.pause||1e3,d=t.random||!1,p=t.list||[],f=t.charset||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",h=null,g=null,m=!0;n()}}var _appConfig=function(){"use strict";var e="app",t=["ngSanitize","ngMessages","flash","ngAnimate","ui.router","restangular","unsavedChanges","duScroll","socialsharing","noCAPTCHA","truncate","monospaced.elastic","angular-nicescroll","ui.bootstrap","ngTagsInput","angular-google-gapi","facebook","google.places","ngWYSIWYG","Deg.SlackApi","base64","xeditable","ngFileUpload","ngMap","noCAPTCHA","youtube-embed","LocalStorageModule","bootstrapLightbox","ngCsv","ngWebSocket","luegg.directives"],n=function(t,n){angular.module(t,n||[]),angular.module(e).requires.push(t)};return{applicationModuleName:e,applicationModuleVendorDependencies:t,registerModule:n}}();angular.module(_appConfig.applicationModuleName,_appConfig.applicationModuleVendorDependencies),angular.module(_appConfig.applicationModuleName).config(["$locationProvider","$httpProvider",function(e,t){"use strict";e.html5Mode(!0).hashPrefix("!"),delete t.defaults.headers.common["X-Requested-With"]}]),angular.element(document).ready(function(){"use strict";"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[_appConfig.applicationModuleName])}),_appConfig.registerModule("mainapp",[]),_appConfig.registerModule("core"),function(){"use strict";var e=angular.module("mainapp");e.controller("AuthController",["$scope","$log","$state","BrowserHistory","Authentication","Flash","$stateParams","FormProcessor",function(e,t,n,r,i,o,a,s){t.debug("Auth Controller active"),e.profile?(e.isAuthenticated=!0,e.showSignIn=!1):e.$on("$stateChangeSuccess",function(t,n){e.showSignIn="guest.signin"!==n.name}),e.credentials={first_name:a.first_name,last_name:a.last_name,email:a.email,remember_me:!0},e.signup=function(){s.validate(e.signupForm)&&i.signup(e.credentials).then(function(){r.afterSignin()},function(t){s.hadFailure(e.signupForm,t)})},e.login=function(t){s.validate(e.loginForm)&&i.signin(e.credentials).then(function(){r.afterSignin()},function(t){s.hadFailure(e.loginForm,t)})},e.forgotPassword=function(){s.validate(e.forgotForm)&&i.forgotPassword(e.credentials).then(null,function(t){s.hadFailure(e.forgotForm,t)})["finally"](function(){e.noCaptchaControl.reset()})},e.resetPassword=function(){e.credentials.token=a.token,s.validate(e.resetForm)&&i.resetPassword(e.credentials).then(r.showSignin,function(t){s.hadFailure(e.resetForm,t)})}}])}(),function(){var e=angular.module("mainapp");e.controller("ChannelsController",["$scope","$log",function(e,t){t.debug("Channels controller active")}])}(),function(){var e=angular.module("mainapp");e.controller("SlackSetupController",["$scope","$log","SlackConfig","slackSvc",function(e,t,n,r){t.debug("Slack setup controller active"),e.start=function(){r.authorize(n.CLIENT_ID,n.AUTH_PARAMS)}}]),e.controller("OAuth2Controller",["$scope","$log","$state","$stateParams","$location","Flash","Restangular","slackSvc",function(e,t,n,r,i,o,a,s){t.debug("OAuth 2 controller active");var l=i.search();switch(r.type){case"slack":t.debug("Got slack callback"),l.state!=e.user.id?(o.create("danger","Failed to authenticate with Slack. Please try again."),n.go("app.slack-setup")):e.user.post("oauth",{service:"slack",exchange_code:l.code}).then(function(t){_.extend(e.user,t),s.InitToken(t.slack_access_token),o.create("success","Success! Authenticated with Slack. You are good to go!")},function(e){n.go("app.slack-setup")})}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("ChatController",["$log","$scope","$state","$q","SajSlack","Restangular",function(e,t,n,r,i,o){e.debug("Chat controller active"),i.waitUntilInitialized().then(function(e){e&&(t.slack=i)}),t.getUsers=function(t){e.debug("query: "+t);var n=r.defer();return o.all("search").get("slack",{q:t}).then(function(t){n.resolve(t.list),e.debug(t.list)},n.reject),n.promise},t.onMemberSelect=function(e){i.chats.startDM(e.slack_id,e.user_id).then(function(e){n.go("app.messaging",{key:e.key})})}}]),e.controller("MessagingController",["$log","$filter","$scope","$stateParams","SajSlack","Flash","BrowserHistory",function(e,t,n,r,i,o,a){n.isActiveChat=!!r.key;var s={};i.waitUntilInitialized().then(function(e){e&&(n.slack=i,i.chats.get(r.key).then(function(e){i.chats.activate(e),angular.forEach(i.activeChat.users,function(e){s[e.slack_id]=e}),i.chats.imHistory(i.activeChat.key,i.activeChat.channel_id).then(function(e){})}))}),n.sendMessage=function(e){i.stream&&i.stream.send(i.activeChat,e)&&(n.data.message="")},n.getUser=function(e){return s[e]},n.getTime=function(e){return e.ts?t("date")(1e3*e.ts,"shortTime"):'<i class="fa fa-clock-o"></i>'}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("DashboardController",["Restangular","$scope","$log","Lightbox",function(e,t,n,r){t.timeRemaining=(new Date(2016,1,19,19).getTime()-Date.now())/1e3,t.isCheckinAvailable=!1,t.schedule=[{url:"/p/modules/core/img/schedule/hacknyu_event_schedule_1.png"}],t.openLightboxModal=function(e,t,n){r.openModal(e,t)},t.checkin=function(n){e.all("checkin_events/"+n+"/checkin").post().then(function(e){t.checkinMessage="Success, you are checked in: "+e.checkin_location},function(e){t.checkinErrors=e.data.errors})},t.tabs=[]}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("LandingController",["$scope","$log","$state","Lightbox","HackNYUConstants",function(e,t,n,r,i){t.debug("Landing Controller active"),e.tickerList=i.TickerList,e.introVideo=i.IntroVideo,e.dentalVideo=i.DentalVideo,e.playerVars={controls:0,autoplay:1,mute:!0},e.playerDentalVars={controls:1,autoplay:1,mute:!0},e.$on("youtube.player.ended",function(e,t){t.playVideo()}),e.$on("youtube.player.ready",function(e,t){t.mute()}),e.schedule=[{url:"/p/modules/core/img/schedule/hacknyu_event_schedule_1.png"}],e.openLightboxModal=function(e,t,n){r.openModal(e,t)}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("AboutController",["$log","$state","Flash","$scope","PhotosService","Lightbox","$stateParams",function(e,t,n,r,i,o,a){r.aboutTabs=[{heading:"Overview",templateUrl:"/p/modules/mainapp/profiles/partials/overview.partial.html",controller:"OverviewController",link:null,active:"overview"==a.about||!a.about},{heading:"Work and Education",templateUrl:"/p/modules/mainapp/profiles/partials/work-education.partial.html",controller:"WorkEducationController",link:"work-education",active:"work-education"==a.about},{heading:"Contact and Basic Info",templateUrl:"/p/modules/mainapp/profiles/partials/contact.partial.html",controller:"ContactController",link:"contact",active:"contact"==a.about}],r.itemTypes=[{name:"workplaces",title:"Work History",header:"Add a new workplace",details:!0,templateUrl:"/p/modules/mainapp/profiles/partials/work-form.tmpl.html"},{name:"colleges",title:"Colleges",header:"Add a college",details:!0,templateUrl:"/p/modules/mainapp/profiles/partials/college-form.tmpl.html"},{name:"schools",title:"High Schools",header:"Add a high school",details:!0,templateUrl:"/p/modules/mainapp/profiles/partials/school-form.tmpl.html"}],r.onSelectTab=function(e){t.go(t.current.name,{about:e.link})},r.noRecordsFound=function(e){var t=!1;return angular.forEach(r.itemTypes,function(n){e[n.name]&&e[n.name].length>0&&(t=!0)}),!t}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("ProfilesController",["$log","$state","Flash","$scope","PhotosService","Lightbox","$stateParams","profile",function(e,t,n,r,i,o,a,s){e.debug("Profile controller active"),r.profile=s,r.profile.username=a.username,r.editMode=s.user_id==r.user.id,r.details=!0,r.profileTabs=[{title:"Projects",src:"/p/modules/mainapp/projects/projects.view.html",route:"projects",controller:"ProjectsUserController",active:a.projects||!a.about},{title:"About",src:"/p/modules/mainapp/profiles/partials/about.partial.html",routes:"about",controller:"AboutController",active:a.about}],r.openLightboxModal=function(e,t,n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),n.cancelBubble=!0,n.returnValue=!1,o.openModal(e,t)},r.sajCoverOptions={multiple:!1,uploaderTitle:"Upload a Cover Photo",chooserTitle:"Select a Cover Photo",albumKey:r.profile.key,albumName:"Cover Photos"},r.sajProfileOptions={multiple:!1,uploaderTitle:"Upload a Profile Photo",chooserTitle:"Select a Profile Photo",albumKey:r.profile.key},r.saveBackgroundImage=function(e){r.profile.cover=e,n.create("success","Success, your cover has been updated."),r.profile.save()},r.saveProfileImage=function(e){r.profile.avatar=e,n.create("success","Success, your profile photo has been updated."),r.profile.save()},r.onSelectTab=function(e){}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("ProjectsViewController",["$sce","$scope","$log","$state","project","PhotosService","$anchorScroll","AppConfig","Lightbox","Flash","SajSlack","$filter","$q","$sanitize",function(e,t,n,r,i,o,a,s,l,u,c,d,p,f){t.project=i,t.isMember=!1,t.myPermissions=[],t.privateChannel=null,t.publicChannel=null,t.inPublicChannel=!1,t.data={},angular.forEach(t.project.channels,function(e){e.is_private?t.privateChannel=e:t.publicChannel=e}),angular.forEach(t.project.members,function(e){e.user_id==t.user.id&&(t.isMember=!0,t.myPermissions=e.permissions,n.debug("Your permissions for "+i.name+": "+t.myPermissions.toString()))}),t.joinProject=function(e){i.all("members").post({user_id:t.user.id}).then(function(e){e?(i.members.push(e),t.isMember=!0,t.myPermissions=e.permissions,u.create("success","Success, you have joined "+i.name+"!")):u.create("success","Your request to join "+i.name+" has been sent for approval.")}),e.stopPropagation()},t.openLightboxModal=function(e,t){l.openModal(e,t)},t.getProjectStory=function(){return t.project.story?e.trustAsHtml(f(t.project.story)):void 0},t.getProjectImages=function(){return[]},t.canEditProject=function(){return _.indexOf(t.myPermissions,s.user_permissions.EDIT_PROJECT)>-1},t.goToProfile=function(e){r.go("app.profiles",{username:e}),a()},t.slack={};var h={};c.waitUntilInitialized().then(function(e){e&&(t.slack=c,t.publicChannel&&(n.debug("Public chat is available on ..."+t.publicChannel.channel_name),c.chats.get(t.publicChannel.key).then(function(e){c.chats.activate(e),t.activeChat=c.activeChat,-1==_.indexOf(t.activeChat.slack_ids,c.mySlackUser.slack_id)&&(t.inPublicChannel=!1,n.debug("You have not participated in discussion on this project before...")),c.chats.imHistory(t.activeChat.channel_id)})))});var g=function(){var e=p.defer();return t.inPublicChannel?e.resolve():(n.debug("adding you to this project"),t.slack.activeChat.all("users").post({user_id:t.user.id}).then(function(n){t.inPublicChannel=!0,c.addActiveChatUser(n),c.chats.join(t.slack.activeChat.channel_name).then(e.resolve,e.reject),e.resolve()},e.reject)),e.promise};t.sendMessage=function(e){g().then(function(){c.stream&&c.stream.send(c.activeChat,e)&&(t.data.message="")})},t.getUser=function(e){return h[e]},t.getTime=function(e){return e.ts?d("date")(1e3*e.ts,"short"):'<i class="fa fa-clock-o"></i>'},t.authenticateWithSlack=function(){c.authenticate()}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("ProjectsController",["$scope","$log","$state","$anchorScroll","PhotosService","ProjectsService",function(e,t,n,r,i,o){e.title="All Projects",e.projects=o.projects,e.projectsFound=function(){return Object.keys(e.projects.items).length>0},e.viewProject=function(e){n.go("app.projects-view",{link:e.project_link})},e.loadMore=function(){o.list().then(function(t){_.extend(e.projects,t)})},o.projectsFetchedInit||(t.debug("Fetching projects..."),e.loadMore())}]),e.controller("ProjectsUserController",["$scope","$log","$state","$anchorScroll","ProjectsService","PhotosService",function(e,t,n,r,i,o){var a=e.profile.username;i.setUsername(a),e.title=e.profile.name+"'s Projects",e.projects=i.userProjects[a],e.projectsFound=function(){return Object.keys(e.projects.items).length>0},e.viewProject=function(e){n.go("app.projects-view",{link:e.project_link})},e.loadMore=function(){i.userList(a).then(function(t){_.extend(e.projects,t)})},i.userProjects[a].fetchedInit||(t.debug("Fetching projects..."),e.loadMore())}]),e.controller("ProjectsStartController",["$log","$scope","ProjectsService","FormProcessor","$state",function(e,t,n,r,i){var o="<h2>Inspiration</h2><p>My inspiration for this project was...</p><h2>Challenges</h2><p>The challenges I will face/have faced were...</p><h2>Who is a good fit for this project?</h2><p>I am looking for...e.g. android developers, game engine designers, content experts, etc.</p><h2>What I learned?</h2><p>I learned...</p><h2>What's next?</h2><p>The next thing is...</p>";t.data={story:o},t.submit=function(){return r.validate(t.projectForm)?void n.create(t.data).then(function(e){i.go("app.projects-edit",{link:e.project_link})}):void $anchorScroll("form-top")}}]),e.controller("ProjectsEditController",["$scope","$state","project","$q","Restangular","FormProcessor","Lightbox","$log","Flash","BrowserHistory","$anchorScroll","AppConfig","PhotosService","SajEmail","$timeout",function(e,t,n,r,i,o,a,s,l,u,c,d,p,f,h){function g(){e.data.newMemberEmail=null,e.projectForm.addMember.$success=!0,h(function(){e.projectForm.addMember.$success=!1},5e3)}function m(){t.go("app.projects-view",{link:e.data.project_link}),c(),l.create("success","Project saved successfully!")}e.data=n,s.debug(n),e.myPermissions=[],angular.forEach(e.data.members,function(t){t.user_id==e.user.id&&(e.myPermissions=t.permissions,s.debug("Your permissions for "+n.name+": "+e.myPermissions.toString()))}),e.getProfiles=function(e){var t=r.defer();return i.all("search").get("hacknyu",{q:e+" model:profile"}).then(function(e){t.resolve(e.list)},t.reject),t.promise},e.inviteMember=function(t){if(!e.projectForm||!e.projectForm.addMember.$invalid){var n=f.open({title:"Invite To Project",recipientEmail:t});n.then(function(t){t.model_key=e.data.key,i.all("invites/projects").post(t).then(function(t){e.data.invites=e.data.invites||[],e.data.invites.push(t),g()},function(t){v=t.data.errors,angular.forEach(v,function(t,n){e.projectForm[n]&&e.projectForm[n].$setValidity(t,!1)})})})}},e.approveRequest=function(e){n.one("requests",e.key).post().then(function(e){n.members.push(e);var t=-1;angular.forEach(n.requests,function(n,r){n.user_id==e.user_id&&(t=r)}),n.requests.splice(t,1)})},e.denyRequest=function(e){n.one("requests",e.key).remove().then(function(e){angular.forEach(n.requests,function(t,n){t.user_id==e.user_id&&_.extend(t,e)})})};var v=[];e.onMemberSelect=function(t,n,r,o){angular.forEach(v,function(t,n){e.projectForm[n]&&e.projectForm[n].$setValidity(t,!0)}),i.all("invites/projects").post({user_id:t.user_id,model_key:e.data.key}).then(function(t){e.data.invites=e.data.invites||[],e.data.invites.push(t),g()},function(t){v=t.data.errors,angular.forEach(v,function(t,n){e.projectForm[n]&&e.projectForm[n].$setValidity(t,!1)})})},e.onMemberDelete=function(t){n.one("members",t.username).remove().then(function(){_.remove(e.data.members,t)},function(e){t.error=e.data.description})},e.onShowUpdateMember=function(e){e.tempRole=angular.copy(e.role),e.edit=!0},e.onMemberUpdate=function(e){e.role=e.tempRole,n.customPUT(e,"members/"+e.username).then(function(t){_.extend(e,t),e.tempRole=null,e.edit=!1})},e.onMemberUpdateDismiss=function(e){e.tempRole=e.role,e.edit=!1},e.canAddMember=function(){return _.indexOf(e.myPermissions,d.user_permissions.ADD_PROJECT_MEMBER)>-1},e.canEditMember=function(){return _.indexOf(e.myPermissions,d.user_permissions.EDIT_PROJECT_MEMBER)>-1},e.canDeleteMember=function(){return _.indexOf(e.myPermissions,d.user_permissions.DELETE_PROJECT_MEMBER)>-1},e.editorConfig={sanitize:!1,toolbar:[{name:"basicStyling",items:["bold","italic","underline","strikethrough","subscript","superscript","-","leftAlign","centerAlign","rightAlign","blockJustify","-"]},{name:"paragraph",items:["orderedList","unorderedList","outdent","indent","-"]},{name:"doers",items:["removeFormatting","undo","redo","-"]},{name:"colors",items:["fontColor","backgroundColor","-"]},{name:"links",items:["image","hr","symbols","link","unlink","-"]},{name:"styling",items:["size"]}]},e.trackOptions=[null,"Accessiblity","Education Technology","Dentistry and Healthcare","Sustainability"],e.sajImageOptions={multiple:!0,uploaderTitle:"Upload Screenshots",chooserTitle:"Select Screenshots",albumKey:e.data.key},e.sajFeatureOptions={multiple:!1,uploaderTitle:"Upload a Feature Image",chooserTitle:"Select a Feature Image",albumKey:e.data.key},e.openLightboxModal=function(t){a.openModal(e.data.images,t)},e.deleteImage=function(t){_.remove(e.data.images,function(e){return e.key==t.key?!0:void 0}),e.projectForm.$setDirty()},e.setAsFeature=function(t){e.data.feature=t,c(),e.submit(!0),l.create("success","Project feature updated successfully.")},e.submit=function(t){return o.validate(e.projectForm)?void e.data.save().then(function(){t||m()},function(t){o.hadFailure(e.projectForm,t)}):void c()}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("SecurityController",["$log","$scope",function(e,t){e.debug("Security controller active"),e.debug(t.user),t.origUser=angular.copy(t.user),t.togglePswdForm=function(){t.showPswdForm=!t.showPswdForm},t.resetForm=function(){t.origUser=angular.copy(t.user),t.showPswdForm=!1},t.submit=function(t){console.log(t),t.save().then(function(t){e.debug(t)})}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("SetupWizardController",["$scope","$log","Restangular","hackathons","profile","$timeout","$stateParams",function(e,t,n,r,i,o,a){t.debug(i)}])}(),function(){"use strict";var e=angular.module("core");e.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("admin",{url:"/admin","abstract":!0,controller:"LayoutController",templateUrl:"/p/modules/core/layouts/base-layout.view.html",resolve:{isLoggedIn:["Authentication","AppConfig","$log","$q","$timeout","BrowserHistory","Flash",function(e,t,n,r,i,o,a){var s=r.defer();return e.isReady().then(function(){n.debug("Resolved app: "+e.isLogged()),e.isLogged()?e.hasPermission(t.user_permissions.VIEW_ADMIN)?s.resolve(e.isLogged()):(s.reject(),a.create("danger","Sorry, you are not authorized to access the admin panel."),i(o.goDashboardHome,0)):(s.reject(),i(o.forceShowSignup,0))},function(){s.reject(!1),n.debug("Failed to init Authentication Service.")}),s.promise}]}}).state("admin.users",{url:"/users",templateUrl:"/p/modules/mainapp/admin/users/users.view.html",controller:"AdminUsersController"}).state("admin.registrations",{url:"/registrations",templateUrl:"/p/modules/mainapp/admin/registrations/registrations.view.html",controller:"AdminRegistrationsController"}).state("admin.volunteers",{url:"/volunteers",templateUrl:"/p/modules/mainapp/admin/volunteers/volunteers.view.html",controller:"AdminVolunteersController"}).state("admin.mentors",{url:"/mentors",templateUrl:"/p/modules/mainapp/admin/mentors/mentors.view.html",controller:"AdminMentorsController"}).state("admin.events",{url:"/events",controller:"AdminEventsController",templateUrl:"/p/modules/mainapp/admin/events/events.view.html"}).state("admin.events-start",{url:"/events/start",controller:"AdminEventsStartController",templateUrl:"/p/modules/mainapp/admin/events/events-start.view.html"}).state("admin.events-edit",{url:"/events/edit/:key",controller:"AdminEventsEditController",templateUrl:"/p/modules/mainapp/admin/events/events-edit.view.html",resolve:{event:["$stateParams","CheckInService","BrowserHistory",function(e,t,n){var r=t.events.get(e.key);return r.then(function(e){return e},n.go404),r}]}}).state("admin.events-view",{url:"/events/view/:key",controller:"AdminEventsViewController",templateUrl:"/p/modules/mainapp/admin/events/events-detail.view.html",resolve:{event:["$stateParams","CheckInService","BrowserHistory",function(e,t,n){var r=t.events.get(e.key);return r.then(function(e){return e},n.go404),r}]}}).state("admin.checkin",{url:"/checkin",templateUrl:"/p/modules/mainapp/admin/checkin/checkin-start.view.html",controller:"AdminCheckinStartController",resolve:{event:["isLoggedIn","$log","$q","AppConfig","Flash","CheckInService",function(e,t,n,r,i,o){var a=n.defer(),s=function(){i.create("danger","Failed to initialize check-in. Call 646 919 2569"),a.resolve(!1)};return o.events.get(r.current_hackathon_id).then(function(e){o.checkin.get(e).then(function(t){e.checkinInstances=t,a.resolve(e)},s)},s),a.promise}]}})}])}(),function(){"use strict";var e=angular.module("core");e.constant("_",_),e.constant("HackNYUConstants",{Colors:{DARK_PRIMARY_COLOR:"#58008e",PRIMARY_COLOR:"#673AB7",LIGHT_PRIMARY_COLOR:"#D1C4E9",TEXT_PRIMARY_COLOR:"#FFFFFF",ACCENT_COLOR:"#7C4DFF",PRIMARY_TEXT_COLOR:"#212121",SECONDARY_TEXT_COLOR:"#727272",DIVIDER_COLOR:"#B6B6B6"},TickerList:["A Better NYU","Accessibility","Assistive Tech","Oral Healthcare","Educational Tech","Student Life","Sustainability","Social Impact"],IntroVideo:"0fqsqrB0LS4",DentalVideo:"QqPu3aNZ3KM",LocalStorage:{leftSidebar:"left_sidebar",rightSidebar:"right_sidebar"}}),e.config(["RestangularProvider","AppConfigConstant","$logProvider","LightboxProvider","$uiViewScrollProvider","noCAPTCHAProvider","localStorageServiceProvider",function(e,t,n,r,i,o,a){e.setBaseUrl("/api/v1").setRestangularFields({id:"key"}),n.debugEnabled(t.development),o.setSiteKey(t.recaptcha_public_key),o.setTheme("light"),i.useAnchorScroll(),a.setPrefix("hacknyu_"),r.getImageUrl=function(e){return"string"==typeof e?e.url:e.url?e.url:"/images/"+e.key},r.fullScreenMode=!1}]),e.run(["Restangular","$log","$state","$rootScope","$timeout","Authentication","BrowserHistory","FlashMessages","Flash","AppConfig",function(e,t,n,r,i,o,a,s,l,u){function c(e,n){t.debug("User has been changed"),r.cfg=u,r.profile=n.profile,r.user=n.user,r.isLoggedIn=n.profile?!0:!1,r.isLoggedIn&&!r.user.verified&&(l.dismiss(),l.create("info",'Your email is not verified! <a ui-sref="core.resend-verification">Send another verification email?</a>'))}function d(e,t){t&&l.create(e,t.description||t)}var p,f=function(){i.cancel(p),r.isLoading=!1};o.registerObserverCallback(o.observable.UPDATE_USER,c),o.isLogged()&&o.setUser(o.user),a.init(),e.setErrorInterceptor(function(e){f();var t;return e.data&&(t=e.data.description?e.data.description:null),403===e.status?d("danger",t||"Sorry, you're not allowed to do it, please sign in with different account"):401===e.status?(a.forceShowSignup(),d("info",t||"Please login or sign up to continue.")):404===e.status?d("danger",t||"Sorry, this requested page doesn't exist"):d("danger",t,!0),!0}),e.addRequestInterceptor(function(e,t){return p=i(function(){r.isLoading=!0},500),"remove"!==t?e:void 0}),e.addResponseInterceptor(function(e){return f(),e}),e.addResponseInterceptor(function(e,t){var n;return"getList"===t?(n=e.list,n.meta=e.meta):n=e,n}),_.isEmpty(s)||angular.forEach(s,function(e){l.dismiss(),l.create(e[0]||"danger",e[1]),l.pause()})}])}(),function(){"use strict";var e=angular.module("core");e.run(["_",function(e){var t={};t.assignDelete=function(t,n){e.assign(t,n),e.each(e.difference(e.keys(t),e.keys(n)),function(e){delete t[e]})},e.each(t,function(t,n){e[n]=e.bind(t,e)})}])}(),function(){"use strict";var e=angular.module("mainapp");e.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app",{"abstract":!0,resolve:{isLoggedIn:["Authentication","$q","$timeout","BrowserHistory","$log",function(e,t,n,r,i){var o=t.defer();return e.isReady().then(function(){return i.debug("Resolved app: "+e.isLogged()),e.isLogged()?void o.resolve(e.isLogged()):(o.reject(!1),n(r.goHome,0),o.promise)},function(){o.reject(!1),i.debug("Failed to init Authentication Service.")}),o.promise}]},controller:"LayoutController",templateUrl:"/p/modules/core/layouts/base-layout.view.html"}).state("app.dashboard",{url:"/dashboard",templateUrl:"/p/modules/mainapp/dashboard/dashboard.view.html",controller:"DashboardController"});var n=function(e,t,n){var r=n.defer();return e.all("registrations").all("attendees").getList().then(function(e){angular.forEach(e,function(e){e.which===t.current_hackathon_id&&r.resolve(e)}),r.resolve(!1)}),r.promise},r=function(e,t,n){var r=n.defer();return e.all("registrations").all("volunteers").getList().then(function(e){angular.forEach(e,function(e){e.which===t.current_hackathon_id&&r.resolve(e)}),r.resolve(!1)}),r.promise},i=function(e,t,n){var r=n.defer();return e.all("registrations").all("mentors").getList().then(function(e){angular.forEach(e,function(e){e.which===t.current_hackathon_id&&r.resolve(e)}),r.resolve(!1)}),r.promise},o=function(e,t,n,r,i,o,a,s,l){var u=n.defer();return""===t.username?(u.reject(),r(a.goDashboardHome,0)):o.username==l.user.username?u.resolve(l.profile):e.get(t.username).then(function(e){u.resolve(e)},function(e){u.reject(),401!==e.status?(s.create("danger","Sorry, page not found"),r(a.go404,0)):i.debug("Profile found for user "+t.username+", but you are not logged in...")}),u.promise};e.state("app.registration-view",{url:"/registration",controller:"RegistrationController",templateUrl:"/p/modules/mainapp/hacknyu/registrations/registration.view.html",resolve:{registration:["Restangular","AppConfig","$q","$timeout","$state",function(e,t,r,i,o){var a=n(e,t,r);return a.then(function(e){e||i(function(){o.go("app.registration-edit")},0)}),a}]}}).state("app.registration-edit",{url:"/registration/edit",controller:"RegistrationEditController",templateUrl:"/p/modules/mainapp/hacknyu/registrations/registration-edit.view.html",resolve:{registration:["Restangular","AppConfig","$q",n]}}).state("app.volunteer-view",{url:"/volunteer",controller:"VolunteerController",templateUrl:"/p/modules/mainapp/hacknyu/volunteers/volunteer.view.html",resolve:{volunteer:["Restangular","AppConfig","$q","$timeout","$state",function(e,t,n,i,o){var a=r(e,t,n);return a.then(function(e){e||i(function(){o.go("app.volunteer-close")},0)}),a}]}}).state("app.volunteer-edit",{url:"/volunteer/edit",controller:"VolunteerEditController",templateUrl:"/p/modules/mainapp/hacknyu/volunteers/volunteer-edit.view.html",resolve:{volunteer:["Restangular","AppConfig","$q","$timeout","$state",function(e,t,n,i,o){var a=r(e,t,n);return a.then(function(e){e||i(function(){o.go("app.volunteer-close")},0)}),a}]}}).state("app.volunteer-close",{url:"/volunteer/close",templateUrl:"/p/modules/mainapp/hacknyu/volunteers/volunteer-close.view.html"}).state("app.mentor-view",{url:"/mentor",controller:"MentorController",templateUrl:"/p/modules/mainapp/hacknyu/mentors/mentor.view.html",resolve:{mentor:["Restangular","AppConfig","$q","$timeout","$state",function(e,t,n,r,o){var a=i(e,t,n);return a.then(function(e){e?e.approved||r(function(){o.go("app.mentor-not-ready")},0):r(function(){o.go("app.mentor-edit")},0)}),a}]}}).state("app.mentor-edit",{url:"/mentor/edit",controller:"MentorEditController",templateUrl:"/p/modules/mainapp/hacknyu/mentors/mentor-edit.view.html",resolve:{mentor:["Restangular","AppConfig","$q",i]}}).state("app.mentor-not-ready",{url:"/mentor/notready",controller:"MentorNotReadyController",templateUrl:"/p/modules/mainapp/hacknyu/mentors/mentor-not-ready.view.html",resolve:{mentor:["Restangular","AppConfig","$q","$timeout","$state",function(e,t,n,r,o){var a=i(e,t,n);return a.then(function(e){e?e.approved&&r(function(){o.go("app.mentor-view")},0):r(function(){o.go("app.mentor-edit")},0)}),a}]}}).state("app.projects",{url:"/projects",controller:"ProjectsController",templateUrl:"/p/modules/mainapp/projects/projects.view.html"}).state("app.projects-me",{url:"/projects/me",controller:["Authentication","$state",function(e,t){t.go("app.profiles",{username:e.user.username,projects:!0})}]}).state("app.projects-start",{url:"/projects/start",controller:"ProjectsStartController",templateUrl:"/p/modules/mainapp/projects/projects-start.view.html"}).state("app.projects-edit",{url:"/projects/edit/:link",controller:"ProjectsEditController",templateUrl:"/p/modules/mainapp/projects/projects-edit.view.html",resolve:{project:["$stateParams","ProjectsService","BrowserHistory",function(e,t,n){var r=t.get(e.link);return r.then(function(e){return e},n.go404),r}]}}).state("app.projects-view",{url:"/projects/view/:link",controller:"ProjectsViewController",templateUrl:"/p/modules/mainapp/projects/projects-detail.view.html",resolve:{project:["$stateParams","ProjectsService","BrowserHistory",function(e,t,n){var r=t.get(e.link);return r.then(function(e){return e},n.go404),r}]}}).state("app.oauth",{url:"/oauth2callback/:type",controller:["$location","$stateParams","$log","Flash","SajSlack",function(e,t,n,r,i){var o=e.search();switch(t.type){case"slack":n.debug("Got slack callback"),i.authorize(o)}}]}).state("app.chat",{url:"/chat",controller:"ChatController",templateUrl:"/p/modules/mainapp/chat/chat.view.html"}).state("app.messaging",{url:"/chat/:key",templateUrl:"/p/modules/mainapp/chat/chat.view.html",controller:"MessagingController"}).state("app.profile-me",{url:"/profile/me",controller:["Authentication","$state",function(e,t){t.go("app.profiles",{username:e.user.username})}]}).state("app.profiles",{url:"/:username?projects&about",controller:"ProfilesController",templateUrl:"/p/modules/mainapp/profiles/profile.view.html",resolve:{profile:["ProfilesService","$stateParams","$q","$timeout","$log","$state","BrowserHistory","Flash","Authentication",o]}})}])}(),function(){"use strict";var e=angular.module("core");e.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("core",{resolve:{isLoggedIn:["Authentication","$q","$log",function(e,t,n){var r=t.defer();return e.isReady().then(function(){n.debug("Resolved core: "+e.isLogged()),r.resolve(e.isLogged())},function(){r.reject(!1),n.debug("Failed to init Authentication Service.")}),r.promise}]},controller:"LayoutController","abstract":!0,templateUrl:"/p/modules/core/layouts/base-layout.view.html"}).state("core.dental",{url:"/tracks/dental",controller:"DentalTrackController",templateUrl:"/p/modules/mainapp/tracks/dental.view.html"}).state("core.edtech",{url:"/tracks/edtech",controller:"EdtechTrackController",templateUrl:"/p/modules/mainapp/tracks/edtech.view.html"}).state("core.sustainability",{url:"/tracks/sustainability",controller:"SustainabilityTrackController",templateUrl:"/p/modules/mainapp/tracks/sustainability.view.html"}).state("core.accessibility",{url:"/tracks/accessibility",controller:"AccessibilityTrackController",templateUrl:"/p/modules/mainapp/tracks/accessibility.view.html"}).state("core.404",{url:"/404",templateUrl:"/p/modules/core/layouts/404.view.html"}).state("core.guest",{"abstract":!0,template:"<data-ui-view></data-ui-view>",resolve:{"":["isLoggedIn","$q","BrowserHistory","$timeout",function(e,t,n,r){var i=t.defer();return e?(r(n.goDashboardHome,0),i.resolve(!1)):i.resolve(!0),i.promise}]}}).state("core.guest.landing",{url:"/home",templateUrl:"/p/modules/mainapp/landing/landing.view.html",controller:"LandingController"}).state("core.guest.signup",{url:"/signup?first_name&last_name&email",templateUrl:"/p/modules/mainapp/auth/signup.view.html",
controller:"AuthController"}).state("core.guest.signin",{url:"/signin",templateUrl:"/p/modules/mainapp/auth/signin.view.html",controller:"AuthController"}).state("core.guest.forgot-password",{url:"/forgot-password",templateUrl:"/p/modules/mainapp/auth/forgot-password.view.html",controller:"AuthController"}).state("core.guest.reset",{url:"/reset/:token",templateUrl:"/p/modules/mainapp/auth/reset.view.html",controller:"AuthController"}).state("invite",{url:"/invite/:key",controller:["$log","Authentication","$stateParams","BrowserHistory","$state","Restangular","AppConfig","Flash",function(e,t,n,r,i,o,a,s){o.one("invites",n.key).post().then(function(n){e.debug(n),n.model_type==a.invite_types.FRIEND?i.go("core.guest.signup",{first_name:n.first_name,last_name:n.last_name,email:n.email}):n.model_type==a.invite_types.PROJECT&&(t.isLogged()?i.go("app.projects-view",{link:n.project_link}):(s.create("info","We are very excited for you to join "+n.model_name+". Please sign upor sign in to continue."),r.forceShowSignup({first_name:n.first_name,last_name:n.last_name,email:n.email},!0)))})}]}).state("logout",{url:"/logout",controller:["Authentication","BrowserHistory",function(e,t){e.logout()["finally"](t.goHome)}]}).state("core.resend-verification",{url:"/user/resend-verification",controller:["Restangular","Authentication","BrowserHistory","AppConfig","Flash",function(e,t,n,r,i){t.resendVerification().then(function(e){i.create("success","A verification email has been sent to "+e+".")})["finally"](n.back)}]}),t.otherwise("/404")}])}(),function(){var e=angular.module("mainapp");e.controller("DentalTrackController",["$scope","HackNYUConstants",function(e,t){e.dentalVideo=t.DentalVideo}]),e.controller("EdtechTrackController",["$scope",function(e){}]),e.controller("SustainabilityTrackController",["$scope",function(e){}]),e.controller("AccessibilityTrackController",["$scope",function(e){}])}(),function(){"use strict";var e=angular.module("core");e.filter("sortByDate",["$log",function(e){return function(e,t,n){var r=[];return angular.forEach(e,function(e){r.push(e)}),r.sort(function(e,n){return new Date(e[t])>new Date(n[t])?1:-1}),n?r.reverse():r}}])}(),function(){"use strict";var e=angular.module("core");e.controller("ChatbarController",["$log","$scope","$state","SajSlack",function(e,t,n,r){function i(){r.waitUntilInitialized().then(function(e){e&&r.chats.list()})}e.debug("Chatbar controller active"),t.slack=r,i(),t.authenticateWithSlack=function(){r.authenticate()},t.openMessaging=function(e){n.go("app.messaging",{key:e.key})}}])}(),function(){"use strict";var e=angular.module("core");e.constant("Dimensions",{LG_SCREEN:980,MD_SCREEN:767,SM_SCREEN:480}),e.controller("LayoutController",["isLoggedIn","$rootScope","$scope","$log","localStorageService","HackNYUConstants","PhotosService",function(e,t,n,r,i,o,a){r.debug("Layout Controller active"),n.currentYear=(new Date).getFullYear(),t.isLoggedIn=e,t.showLeftSidebar=i.get(o.LocalStorage.leftSidebar,!0),t.showRightSidebar=t.isLoggedIn&&i.get(o.LocalStorage.rightSidebar,!1),n.toggleSidebar=function(e){"left"==e?(t.showLeftSidebar=!t.showLeftSidebar,i.set(o.LocalStorage.leftSidebar,t.showLeftSidebar)):(t.showRightSidebar=!t.showRightSidebar,i.set(o.LocalStorage.rightSidebar,t.showRightSidebar))};var s=[{name:"Accessibility Track",sref:"core.accessibility"},{name:"Dental Track",sref:"core.dental"},{name:"Educational Technology Track",sref:"core.edtech"},{name:"Sustainability Track",sref:"core.sustainability"},{name:"Register",sref:"app.registration-view"},{name:"Volunteer",sref:"app.volunteer-view"},{name:"Mentor",sref:"app.mentor-view"}],l=[{name:"Dashboard",sref:"core.app.dashboard"}],u=[{name:"About",sref:"core.guest.landing"},{name:"Sign Up",sref:"core.guest.signup"},{name:"Sign In",sref:"core.guest.signin"}];n.footerMenuItems=[],n.initFooterMenu=function(){n.footerMenuItems=t.isLoggedIn?l:u,angular.forEach(s,function(e){n.footerMenuItems.push(e)})},n.initFooterMenu()}]),e.controller("HeaderController",["$log","$scope","$q","FormProcessor","Authentication","$timeout","BrowserHistory","Restangular",function(e,t,n,r,i,o,a,s){t.credentials={remember_me:!0},t.login=function(){i.signin(t.credentials).then(function(e){a.afterSignin()},a.showSignin)},t.goHome=function(){t.profile?a.goDashboardHome():a.goHome()},t.getProfiles=function(t){e.debug("query: "+i);var r=n.defer(),i={q:t,fields:["user_id","name","email","avatar_url"]};return s.all("search").get("profiles",i).then(function(e){r.resolve(e.list)},r.reject),r.promise}}])}(),function(){"use strict";var e=angular.module("core");e.controller("SidebarController",["$rootScope","Authentication","Dimensions","AppConfig","$scope","$window","$log","$state","$stateParams",function(e,t,n,r,i,o,a,s,l){a.debug("Sidebar Controller active"),i.sidebar=[{name:"Dashboard",sref:"app.dashboard",icon:"fa-dashboard",hidden:!e.isLoggedIn},{name:"HACKNYU 2016",icon:"hn-hacknyu_logo",isCollapsed:!0,subItems:[{name:"Registration",icon:"fa-certificate",sref:"app.registration-view"},{name:"Volunteer",icon:"fa-heart",sref:"app.volunteer-view"},{name:"Mentor/Judge",icon:"fa-life-bouy",sref:"app.mentor-view",badge:{type:"bg-info",value:"Signup"}},{name:"Accessibility Track",icon:"hn-access_logo",sref:"core.accessibility"},{name:"Dental Track",icon:"hn-dh_logo",sref:"core.dental"},{name:"Education & Student Life",icon:"fa-graduation-cap",sref:"core.edtech"},{name:"Sustainability Track",icon:"fa-leaf",sref:"core.sustainability"}]},{name:"Projects",icon:"fa-th",hidden:!e.isLoggedIn,isCollapsed:!1,badge:{type:"bg-important",value:"New"},subItems:[{name:"All Projects",icon:"fa-th-list",sref:"app.projects"},{name:"My Projects",icon:"fa-paw",sref:"app.profiles",srefOptions:"{username: user.username, projects: true}",params:[{key:"projects",value:!0}]},{name:"Start A Project",icon:"fa-plus-circle",sref:"app.projects-start"}]},{name:"My Profile",sref:"app.profiles",srefOptions:"{username: user.username}",params:[{key:"username",value:e.isLoggedIn?i.user.username:""}],icon:"fa-user",hidden:!e.isLoggedIn},{name:"Admin Panel",icon:"fa-asterisk",isCollapsed:!0,hidden:!e.isLoggedIn||!t.hasPermission(r.user_permissions.VIEW_ADMIN),subItems:[{name:"Users",icon:"fa-users",sref:"admin.users",hidden:!t.hasPermission(r.user_permissions.VIEW_USERS)},{name:"Registrations",icon:"fa-certificate",sref:"admin.registrations",hidden:!t.hasPermission(r.user_permissions.VIEW_REGISTRATIONS)},{name:"Volunteers",icon:"fa-heart",sref:"admin.volunteers",hidden:!t.hasPermission(r.user_permissions.VIEW_VOLUNTEERS)},{name:"Mentors",icon:"fa-life-buoy",sref:"admin.mentors",hidden:!t.hasPermission(r.user_permissions.VIEW_MENTORS)},{name:"Check-In",icon:"fa-calendar-check-o",sref:"admin.checkin",hidden:!t.hasPermission(r.user_permissions.VIEW_CHECKINS)}]},{name:"Log out",sref:"logout",icon:"fa-sign-out",hidden:!e.isLoggedIn},{name:"Sign Up",sref:"core.guest.signup",icon:"fa-user-plus",hidden:e.isLoggedIn},{name:"Sign In",sref:"core.guest.signin",icon:"fa-sign-in",hidden:e.isLoggedIn}];var u=function(e){if(!e.params)return!1;var t=!0;return angular.forEach(e.params,function(e){l[e.key]!=e.value&&(t=!1)}),t};i.$on("$stateChangeSuccess",function(){o.innerWidth<=n.LG_SCREEN&&(e.showLeftSidebar=!1);var t=s.current.name;angular.forEach(i.sidebar,function(e){e.active=e.sref==t&&u(e),e.subItems&&angular.forEach(e.subItems,function(n){n.sref==t&&u(n)?(n.active=!0,e.isCollapsed=!1):n.active=!1})})})}])}(),function(){"use strict";var e=angular.module("core");e.factory("Authentication",["$rootScope","AuthenticatedUser","ProfilesService","Restangular","Flash","$q","$log","AppConfig","$base64",function(e,t,n,r,i,o,a,s,l){var u={},c={user:t,profile:null,_waitPromises:[],registerObserverCallback:function(e,t){u[e]=u[e]||[],u[e].push(t)},_notifyCallback:function(e,t){u[e]&&angular.forEach(u[e],function(n){n(e,t)})},observable:{UPDATE_USER:"update_user"},isReady:function(){var e=o.defer();return c._waitPromises.length>0?o.all(c._waitPromises).then(function(){a.debug("Authentication service is now ready."),e.resolve(!0)},e.reject):e.resolve(!0),e.promise},isLogged:function(){return!(!c.user||!c.user.id||c.user.is_guest)},isAdmin:function(){return c.isLogged()&&c.user.admin},setUser:function(e,t){var i=o.defer();if(c._waitPromises=[],c.user=r.restangularizeElement(null,e,"users",!0),c.isLogged())if(t)c.profile=t,c._notifyCallback(c.observable.UPDATE_USER,{user:c.user,profile:t}),i.resolve(t);else{a.debug("Logged in...getting profile");var s=n.get(c.user.username);s.then(function(e){c.profile=e,c._notifyCallback(c.observable.UPDATE_USER,{user:c.user,profile:e}),i.resolve(e)},function(){c.profile=!1,c._notifyCallback(c.observable.UPDATE_USER,{user:c.user,profile:!1}),i.reject(!1)}),c._waitPromises.push(s)}else c.profile=!1,c._notifyCallback(c.observable.UPDATE_USER,{user:c.user,profile:!1}),i.resolve(!1),a.debug("Not logged in...");return i.promise},getUser:function(){return c.user},getProfile:function(){return c.profile},_encode_password:function(e){return l.encode(c.user.encryption_token+s.encoder_split_pattern+e)},signup:function(e){var t=o.defer(),n={first_name:e.first_name,last_name:e.last_name,email:e.email,password:c._encode_password(e.password),terms:e.terms};return r.all("auth/signup").post(n).then(function(e){a.debug(e),c.setUser(e,e.profile),t.resolve(e)},t.reject),t.promise},signin:function(e){var t=o.defer(),n={email:e.email,password:c._encode_password(e.password),remember_me:e.remember_me};return r.all("auth/signin").post(n).then(function(e){c.setUser(e).then(t.resolve,t.reject)},t.reject),t.promise},logout:function(){var e=o.defer();return r.all("auth/signout").post().then(function(t){c.setUser(t.user),_.assignDelete(s,t.app_config),i.create("success","You have been logged out of HACKNYU."),e.resolve()},e.reject),e.promise},forgotPassword:function(e){var t=o.defer(),n={email:e.email,captcha:e.captcha};return r.all("auth/forgot").post(n).then(function(e){i.create("success","An email has been sent to "+n.email+" with reset instructions."),t.resolve(e)},t.reject),t.promise},resetPassword:function(e){var t=o.defer(),n={email:e.email,password:c._encode_password(e.password),token:e.token};return r.all("auth/reset").post(n).then(function(e){i.create("success","Success! Your password was updated. Please login to continue."),t.resolve(e)},t.reject),t.promise},resendVerification:function(){var e=o.defer();return r.all("auth/resend-verification").post().then(function(t){i.create("success","Success! Your password was updated. Please login to continue."),e.resolve(c.user.email)},e.reject),e.promise},hasPermission:function(e){return a.debug(e),_.indexOf(c.user.permissions,e)>-1}};return c}])}(),function(){"use strict";var e=angular.module("core");e.factory("BrowserHistory",["$log","$state","$location","$anchorScroll","$timeout","$rootScope","Flash","_","$q","Authentication","SajSlack","SajDialog",function(e,t,n,r,i,o,a,s,l,u,c,d){var p=[],f=[],h=null,g=["core.guest.signin","core.guest.signup","logout","core.guest.reset","core.guest.landing","core.guest.forgot-password"],m="app.dashboard",v="core.guest.landing",y="core.guest.signin",b="core.guest.signup",$="core.404",w={init:function(){p=[],f=[],o.$on("$stateChangeStart",function(e,n,r,i,o){i==t.get("logout")&&(p=[],f=[]),i["abstract"]||-1!=s.indexOf(g,i.name)||p.push({state:i,params:o}),-1==s.indexOf(g,n.name)&&f.push({state:n,params:r})})},forceShowSignup:function(e,n){e=e||{},h=f.pop(),t.go(b,e),n||a.create("info","Welcome to HACKNYU. Please login or sign up.")},wasLastState:function(e){var t=p[p.length-1];return t?t.state.name==e:void 0},showSignin:function(){t.go(y)},_injectSlackRequest:function(){var e=l.defer();return u.user.slack_access_token?e.resolve():d.open({title:"Enable Slack",message:"Hello and Welcome to <strong>HackNYU</strong>. Would you like connect to Slack to enable commenting, chat and discussion with other hackers? This feature helps brings your ideas to life through active and exciting collaboration!",buttons:{yes:{label:'<i class="fa fa-slack"></i> Connect with Slack',color:"danger"},no:{label:"Skip for Now"}}}).then(function(){c.authenticate(),e.resolve()},e.reject),e.promise},afterSignin:function(){w._injectSlackRequest()["finally"](function(){h?(e.debug("Sign up/sign in page was redirected to from route "+h.state.name),e.debug("Redirecting you there..."),t.go(h.state,h.params,{reload:!0}),h=null):w.back()})},goHome:function(){t.go(v)},back:function(n){var r=p.pop();!r&&u.isLogged()||r.state&&s.indexOf(g,r.state.name)>-1?(e.debug("Go to dashboard home"),t.go(m,{},{reload:n||!1})):(e.debug("go to the state before this state: "+r.state.name),t.go(r.state.name,r.params,{reload:n||!1}))},goDashboardHome:function(){t.go(m)},go404:function(){t.go($)}};return w}])}(),function(){"use strict";var e=angular.module("core");e.service("CheckInService",["$log","$q","Restangular",function(e,t,n){var r=100,i=n.all("checkins"),o=function(){var e={};return e.items={},e.create=function(t){var n=i.all("events").post(t);return n.then(function(t){e.items[t.key]=t}),n},e.list=function(t){var n=i.all("events").getList({limit:r,cursor:t});return n.then(function(t){angular.forEach(t,function(t){e.items[t.key]=t})}),n},e.get=function(n){var r=t.defer();return e.items[n]?r.resolve(e.items[n]):i.all("events").get(n).then(function(t){e.items[n]=t,r.resolve(t)},r.reject),r.promise},e},a=function(){var e={};return e.get=function(e){var n=t.defer();return e.all("checkin_events").getList({limit:200}).then(function(e){n.resolve(e)},n.reject),n.promise},e.start=function(e,t){},e.stop=function(e){},e};this.events=o(),this.checkin=a()}])}(),function(){"use strict";var e=angular.module("core");e.service("FormProcessor",["Flash","$q","$anchorScroll",function(e,t,n){var r={};this.validate=function(t){return angular.forEach(r[t.$name],function(e,n){t[n]&&t[n].$setValidity(e,!0)}),angular.forEach(t.$error.required,function(e){e.$setDirty()}),t.$invalid?(e.create("danger","Please fix all errors below to proceed."),!1):!0},this.hadFailure=function(e,i,o){var a=t.defer();return i.data&&(r[e.$name]=i.data.errors,angular.forEach(r[e.$name],function(t,n){e[n]&&(e[n].$setValidity(t,!1),e[n].$setDirty())}),o&&n(o),a.resolve(!0)),a.promise},this.reset=function(e){e&&r[e.$name]?r[e.$name]={}:r={}}}])}(),function(){"use strict";var e=angular.module("mainapp");e.factory("GoogleIntegration",["GAuth","GApi","$q","$http","$log","$window",function(e,t,n,r,i,o){var a="573911340805-6p0g7sejr7ag93aujibujfeq67ek8f95.apps.googleusercontent.com",s=["https://web.archive.org/web/20160412111801/https://www.googleapis.com/auth/drive.file","https://web.archive.org/web/20160412111801/https://www.googleapis.com/auth/drive.photos.readonly","email","profile"],l="https://web.archive.org/web/20160412111801/https://www.googleapis.com/drive/v2/files";e.setClient(a),e.setScope(s),t.load("drive","v2");var u={isLoggedIn:!1,login:function(){var t=n.defer();return u.isLoggedIn?t.resolve():e.login().then(function(){u.isLoggedIn=!0,t.resolve()},function(e){t.reject(e)}),t.promise},uploadFile:function(t){var i=n.defer();return e.getToken().then(function(e){r.post(l,{title:t.name||"HACKNYU-resume",mimeType:t.type,description:"HACKNYU Resume 2016"},{params:{uploadType:"multipart",convert:!0,ocr:!0},headers:{Authorization:"Bearer "+e.access_token}}).then(function(e){var n=e.data.id,r=o.gapi.client.drive.permissions.insert({fileId:n,resource:{role:"reader",type:"anyone"}}),a=function(){var e="-------314159265358979323846",r="\r\n--"+e+"\r\n",a="\r\n--"+e+"--",s=new FileReader;s.readAsBinaryString(t),s.onload=function(l){var u=t.type||"application/octet-stream",c=btoa(s.result),d=r+"Content-Type: application/json\r\n\r\n"+JSON.stringify({title:t.name||"HACKNYU-resume",mimeType:t.type,description:"HACKNYU Resume 2016"})+r+"Content-Type: "+u+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+c+a,p=o.gapi.client.request({path:"/upload/drive/v2/files/"+n,method:"PUT",params:{uploadType:"multipart",alt:"json",convert:!0},headers:{"Content-Type":'multipart/mixed; boundary="'+e+'"'},body:d}),f=function(e){i.resolve(e)};p.execute(f)}};r.execute(a)},i.reject)},i.reject),i.promise},getFiles:function(e){return t.executeAuth("drive","files.list",e)},getFile:function(e){return t.executeAuth("drive","files.get",{fileId:e.id})},deleteFile:function(e){return t.executeAuth("drive","files.delete",{fileId:e.id})}};return e.checkAuth().then(function(){u.isLoggedIn=!0},function(e){u.isLoggedIn=!1}),u}])}(),function(){"use strict";var e=angular.module("core");e.filter("photoFilter",function(){return function(e,t){if(!e&&t)return t||"/p/modules/core/img/banner-project.jpg";if(e)return e.url?e.url:"/images/"+e.key}}),e.service("PhotosService",["Restangular","$q","$http","$log","Authentication",function(e,t,n,r,i){function o(e,t){r.debug("checking photo against older photos...");var n=!1;return angular.forEach(e,function(e){e.id==t.id&&(n=!0)}),n}var a=this;i.user;this.albumsFetchedInit=!1,this.albums=[],this.albumsMore=!0,this.albumsNextCursor=null,this.photosFetchedInit=!1,this.photos=[],this.photosMore=!0,this.photosNextCursor=null,this.listAlbums=function(){var n=t.defer();return e.all("albums").getList({cursor:a.albumsNextCursor}).then(function(e){r.debug(e),angular.forEach(e,function(e){var t=!1;angular.forEach(a.albums,function(n){e.id==n.id&&(_.extend(n,e),t=!0)}),t||a.albums.push(e)}),a.albumsNextCursor=e.meta.nextCursor,a.albumsMore=e.meta.more,n.resolve(e)},n.reject)["finally"](function(){a.albumsFetchedInit=!0}),n.promise},this.listPhotos=function(n){var i=t.defer();return a.albums[n]?a.albums[n].photos=a.albums[n].photos||[]:i.reject("Album not found "+n),e.all("photos").getList({album_id:a.albums[n]?a.albums[n].id:null,cursor:a.albums[n]?a.albums[n].nextCursor:a.photosNextCursor}).then(function(e){a.albums[n]?(angular.forEach(e,function(e){o(a.albums[n].photos,e)||a.albums[n].photos.push(e)}),a.albums[n].nextCursor=e.meta.nextCursor,a.albums[n].more=e.meta.more,a.albums[n].fetchedInit=!0,r.debug(a.albums),i.resolve(a.albums)):(angular.forEach(e,function(e){o(a.photos,e)||a.photos.push(e)}),a.photosNextCursor=e.meta.nextCursor,a.photosMore=e.meta.more,a.photosFetchedInit=!0,i.resolve(a.photos))},i.reject),i.promise};var s={width:800,height:800,crop:!1,crop_offset_x:.5,crop_offset_y:.5};this.upload=function(e,r){var i=t.defer(),l=new FormData;return _.extend(r,s),l.append("file",e),l.append("width",r.width),l.append("height",r.height),l.append("crop",r.crop),l.append("crop_offset_x",r.crop_offset_x),l.append("crop_offset_y",r.crop_offset_y),l.append("album_key",r.album_key),r.album_name&&l.append("album_name",r.album_name),n.post("/api/v1/photos",l,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e){e=e.data,o(a.photos,e)||a.photos.push(e);var t=-1;if(angular.forEach(a.albums,function(n,r){n.id==e.album.id&&(t=r)}),t>-1)a.albums[t].photos=a.albums[t].photos||[],a.albums[t].photos.push(e),a.albums[t].cover=e;else{var n=angular.copy(e.album);n.photos=[e],n.cover=e,a.albums.push(n),e.album=null}i.resolve(e)},i.reject),i.promise},this.getPhotoUrl=function(e){return e?e.url?e.url:"/images/"+e.key:void 0}}])}(),function(){"use strict";var e=angular.module("mainapp");e.service("ProfilesService",["$log","Restangular",function(e,t){var n=this;this.customRestangular=function(){return t.withConfig(function(e){e.setRestangularFields({id:"username"})})},this.get=function(e){return n.customRestangular().all("profiles").get(e)}}])}(),function(){"use strict";var e=angular.module("mainapp");e.service("ProjectsService",["$log","Authentication","Restangular","$q",function(e,t,n,r){var i=this,o=30;this.customRestangular=function(){return n.withConfig(function(e){e.setRestangularFields({id:"project_link"})})},this.projects=this.customRestangular().all("projects"),this.projectsFetchedInit=!1,this.projects.items={},this.projects.more=!0,this.projects.cursor=null,this.userProjects={},this.get=function(e){var t=r.defer();return i.projects.items[e]?t.resolve(i.projects.items[e]):i.customRestangular().all("projects").get(e).then(function(n){i.projects.items[e]=n,t.resolve(i.projects.items[e])},t.reject),t.promise},this.setUsername=function(e){i.userProjects[e]||(this.userProjects[e]=i.customRestangular().all("projects"),this.userProjects[e].items={},this.userProjects[e].more=!0,this.userProjects[e].cursor=null,this.userProjects[e].fetchedInit=!1)},this.create=function(e){var n=r.defer();return i.customRestangular().all("projects").post(e).then(function(e){i.projects.items[e.project_link]=e;var r=t.user.username;i.setUsername(r),i.userProjects[r].items[e.project_link]=e,n.resolve(i.projects.items[e.project_link])},n.reject),n.promise},this.list=function(){var e=r.defer();return i.projects.getList({limit:o,cursor:i.projects.cursor}).then(function(t){angular.forEach(t,function(e){i.projects.items[e.project_link]=e}),i.projectsFetchedInit=!0,i.projects.more=t.meta.more,i.projects.cursor=t.meta.nextCursor,e.resolve(i.projects)},e.reject),e.promise},this.userList=function(e){var t=r.defer();return i.userProjects[e].getList({username:e,limit:o,cursor:i.userProjects[e].cursor}).then(function(n){angular.forEach(n,function(t){i.userProjects[e].items[t.project_link]=t}),i.userProjects[e].more=n.meta.more,i.userProjects[e].cursor=n.meta.next_cursor,i.userProjects[e].fetchedInit=!0,t.resolve(i.userProjects[e])},t.reject),t.promise}}])}(),function(){"use strict";var e=angular.module("core");e.config(["FacebookProvider","AppConfigConstant",function(e,t){e.init({appId:t.facebook.client_id,xfbml:!0,version:"v2.5"})}]),e.factory("SajFacebookConfig",["AppConfig",function(e){return{SCOPES:e.facebook.scopes}}]),e.service("SajFacebook",["$q","$log","Facebook","SajFacebookConfig","ProfilesService","Authentication",function(e,t,n,r,i,o){var a=this;this.userId=!1,this._isLoggedIn=!1,this.isLoggedIn=function(){n.getLoginStatus(function(e){return"connected"==e.status?(a.userId=e.authResponse.userID,a._isLoggedIn=!0):a._isLoggedIn=!1})},this.isLoggedIn(),this.login=function(){var t=e.defer();return a._isLoggedIn?t.resolve():n.login(function(e){},{scope:r.SCOPES}).then(function(e){a.userId=e.authResponse.userID,t.resolve(e)},function(e){t.reject(e)}),t.promise},this.getProfilePic=function(){var t=e.defer();return a.login().then(function(){n.api("/"+a.userId+"/picture?width=9999",function(e){e?t.resolve(e.data):t.reject(e)})},t.reject),t.promise},this.getBackgroundCover=function(){var t=e.defer();return a.login().then(function(){n.api("/"+a.userId+"?fields=cover",function(e){if(e){var r=e.cover.id;n.api("/"+r+"/picture?width=9999",function(e){e?t.resolve(e.data):t.reject(e)})}else t.reject(e)})},t.reject),t.promise},this.me=function(t){var r=e.defer();return a.login().then(function(){n.api("/me?"+t,function(e){e?r.resolve(e):r.reject(e)})},r.reject),r.promise},this.parseEducation=function(e){var t=[];return angular.forEach(e,function(e){var n=(new Date).getFullYear(),r=(e.year?e.year.name:n)+"-06-01",i={name:e.school.name,graduation_date:r,$imported:!0};"high school"==e.type.toLowerCase()?t.push({type:"schools",item:i}):(e.degree&&(i.concentrations=e.degree.name),i.attended_for=e.type,t.push({type:"colleges",item:i}))}),t},this.parseWorkplaces=function(e){var t=[];return angular.forEach(e,function(e){var n=((new Date).getFullYear(),{company:e.employer.name,position:e.position?e.position.name:null,start_date:e.start_date,end_date:e.end_date,is_present:!e.end_date,$imported:!0});t.push({type:"workplaces",item:n})}),t}}])}(),function(){"use strict";var e=angular.module("core");e.service("SajSlack",["$log","$q","$websocket","$location","$state","$stateParams","AppConfig","Authentication","Restangular","slackSvc","Flash",function(e,t,n,r,i,o,a,s,l,u,c){var d=this,p=30;this._initialized=!1,this._initializing=!1;var f=[],h=null;this.mySlackUser=null;var g=function(){var n=t.defer();return u.InitToken(h,function(t){t.ok?(e.debug("Slack token is initialized!"),n.resolve()):(e.debug("Slack failed to initialize!"),n.reject())}),n.promise},m=function(){var n=t.defer();return u.ExecuteApiMethod("rtm.start",{token:h},function(t){t.ok?(d.stream=y(t.url),d.mySlackUser?(e.debug("Houston, we now have RTM!!"),n.resolve()):l.all("slack/users/byslackid").get(t.self.id).then(function(t){d.mySlackUser=t,e.debug("Houston, we now have RTM!!"),n.resolve()})):n.reject("Failed to start RTM")}),n.promise};this.waitUntilInitialized=function(){var n=t.defer();if(d._initialized)n.resolve(d._initialized);else if(d._initializing)t.all(f)["finally"](function(){n.resolve(d._initialized)});else{e.debug("Starting the initialization.");var r=s.user;r.slack_access_token?(h=r.slack_access_token,d._initializing=!0,f=[],f.push(g()),f.push(m()),t.all(f).then(function(){d._initialized=!0,n.resolve(d._initialized)},function(){n.resolve(d._initialized)})["finally"](function(){d._initializing=!1})):(d._initialized=!1,n.resolve(d._initialized),e.debug("User does not have a slack access token"))}return n.promise},this.isInitialized=function(){return d._initialized},this.addActiveChatUser=function(e){d.activeChat.users_dict=d.activeChat.users_dict||[],d.activeChat.users_dict[e.slack_id]=e,d.activeChat.slack_ids.push(e.slack_id)},this.pushMessageIntoActiveChat=function(e){-1==_.indexOf(d.activeChat.slack_ids,e.user)?d.users.get(e.user).then(function(t){d.addActiveChatUser(t),d.activeChat.messages.push(e)},function(){u.users.info(e.user,function(t){if(t.ok){t=t.user;var n={name:t.real_name||t.name,avatar:{url:t.profile.image_48},slack_id:t.id,email:t.profile.email};d.addActiveChatUser(n),d.activeChat.messages.push(e)}},d._token)}):d.activeChat.messages.push(e)};var v=1;this.stream=null;var y=function(e){function t(){return v++,v}var r=n(e),i=[];return r.onMessage(function(e){e=JSON.parse(e.data),i.push(e),e.reply_to?angular.forEach(d.activeChat.messages,function(t){t.id&&t.id==e.reply_to&&(t.ts=e.ts)}):"message"!=e.type||e.subtype||d.activeChat.channel_id==e.channel&&d.pushMessageIntoActiveChat(e)}),{messages:i,send:function(e,n){return n?(n={id:t(),type:"message",text:n,channel:e.channel_id,user:d.mySlackUser.slack_id},r.send(JSON.stringify(n)),e.messages.push(n),!0):!1}}};this.activeChat={},this.chats={items:[],meta:{more:!0}},this.chats.list=function(e){var n=t.defer();return d.chats.meta.more?l.all("slack/chats").getList({limit:p,cursor:d.chats.meta.nextCursor}).then(function(e){angular.forEach(e,function(e){d.chats.items.push(e)}),d.chats.meta=e.meta,n.resolve(e)},n.reject):n.reject(),n.promise},this.chats.startDM=function(e,n){var r=t.defer();return u.ExecuteApiMethod("im.open",{token:h,user:e},function(e){e.ok?l.all("slack/chats").post({channel_id:e.channel.id,user_ids:[n]}).then(function(e){d.chats.activate(null),angular.forEach(d.chats.items,function(t){t.channel_id==e.channel_id&&d.chats.activate(t)}),d.activeChat||(d.chats.items.push(e),d.chats.activate(e)),r.resolve(e)}):(c.create("danger","Sorry, user not available for direct message."),r.reject())}),r.promise},this.chats.imHistory=function(n){var r=t.defer(),i=null;switch(n.toLowerCase().charAt(0)){case"c":i="channels.history";break;case"g":i="groups.history";break;case"d":i="im.history"}return i?(u.ExecuteApiMethod(i,{token:h,channel:n,count:200},function(t){t.ok?(e.debug(t),angular.forEach(t.messages,function(e){"message"!=e.type||e.subtype||d.pushMessageIntoActiveChat(e)}),r.resolve(d.activeChat.messages)):r.reject()}),r.promise):void e.debug("not a valid type of channel")},this.chats.join=function(e){var n=t.defer();return u.ExecuteApiMethod("channels.join",{token:h,name:e},function(e){e.ok?n.resolve():n.reject()}),n.promise},this.chats.activate=function(t){t||(d.activeChat=null),d.activeChat=t,d.activeChat.messages=d.activeChat.messages||[],d.activeChat.users_dict={},angular.forEach(d.activeChat.users,function(e){d.activeChat.users_dict[e.slack_id]=e}),e.debug("activated chat...")},this.chats.get=function(e){var n=t.defer();return l.all("slack/chats").get(e).then(function(e){d.chats.items.push(e),n.resolve(e)},n.reject),n.promise},this.users={items:{},meta:{more:!0}},this.users.list=function(e){var n=t.defer();return d.users.meta.more?l.all("slack/users").getList({limit:p,cursor:d.users.meta.nextCursor}).then(function(e){angular.forEach(e,function(e){d.users.items[e.key]=e}),d.users.meta=e.meta,n.resolve(e)},n.reject):n.reject(),n.promise},this.users.get=function(e){var n=t.defer();return l.all("slack/users/byslackid").get(e).then(function(e){e?n.resolve(e):n.reject()},n.reject),n.promise},this.authenticate=function(){e.debug("Slack time. Ready, Set, Go...");var t=i.current,n=s.user,l=angular.toJson({userId:n.id,currentState:t.name,currentParams:o}),c=r.protocol()+"://"+r.host();"80"!=r.port()&&(c+=":"+r.port()),c+="/"+a.slack.redirect_uri,u.authorize(a.slack.client_id,{state:l,redirect_uri:c,scope:a.slack.scopes,team:a.slack.team_id})},this.authorize=function(t){t=t||{state:{}};var n=s.user,r={};try{r=angular.fromJson(t.state)}catch(o){e.debug(o)}var a=r.currentState||"app.dashboard",l=r.currentParams||{},u=function(){c.create("danger","Failed to authenticate with Slack. Please try again."),i.go(a,l)};r.userId!=n.id?u():(e.debug("saving access token to backend"),n.post("oauth",{service:"slack",exchange_code:t.code}).then(function(e){_.extend(s.user,e.user),d.mySlackUser=e.slack_user,d.waitUntilInitialized().then(function(e){d._initialized?(c.create("success","Success! Authenticated with Slack. You are good to go!"),i.go(a,l)):u()})},function(e){u()}))}}])}(),function(){"use strict";var e=angular.module("core");e.factory("SlackConfig",["$location","AppConfig",function(e,t){var n=e.protocol()+"://"+e.host();return"80"!=e.port()&&(n+=":"+e.port()),n+="/"+t.slack.redirect_uri,{CLIENT_ID:t.slack.client_id,AUTH_PARAMS:{redirect_uri:n,scope:t.slack.scopes,team:t.slack.team_id}}}]),e.factory("SlackRTM",["$websocket","$log","$interval",function(e,t,n){return function(n){function r(){return i++,i}var i=0,o=e(n),a=[],s=[],l={onMessage:"onMessage",onReceived:"onReceived"},u=function(e,t){s[e]&&angular.forEach(s[e],function(n){n(e,t)})};o.onMessage(function(e){t.debug(e),e=JSON.parse(e.data),"message"==e.type&&(e.reply_to?u(l.onReceived,e):(a.push(e),u(l.onMessage,e)))});return{registerCallback:function(e,t){s[e]||(s[e]=[]),s[e].push(t)},observable:l,messages:a,send:function(e,t){return t={id:r(),type:"message",text:t.text,channel:e,user:t.user},o.send(JSON.stringify(t)),t}}}}]),e.service("SlackOld",["$log","$state","slackSvc","SlackRTM","SlackConfig","slackConfig","$q","Flash","Restangular",function(e,t,n,r,i,o,a,s,l){var u=this;this._initialized=!1,this._initializing=!1,this._waitPromises=[],this._user={},this._observerCallbacks={},this.rtm=null,this.registerObserverCallback=function(e,t){u._observerCallbacks[e]=u._observerCallbacks[e]||[],u._observerCallbacks[e].push(t)},this._notifyCallback=function(e,t){u._observerCallbacks[e]&&angular.forEach(u._observerCallbacks[e],function(n){n(e,t)})},this.observable={UPDATE_SLACK:"update_slack"},this.setUser=function(e){u.reset(),u._user=e;var t=u.init();return u._waitPromises.push(t),t["finally"](function(){u._notifyCallback(u.observable.UPDATE_SLACK,u._initialized)}),t},this.reset=function(){u.users.items=[],u.channels.items=[],u.chats.items=[],u._user={},u._initialized=u._initializing=!1},this.isInitialized=function(){return u._initialized},this.init=function(){var t=a.defer();if(u._initialized)t.resolve();else if(u._initializing)a.all(u._waitPromises).then(t.resolve,t.reject);else if(u._initializing=!0,u._waitPromises.push(t.promise),u._user.slack_access_token){var i=u._user.slack_access_token;i&&n.InitToken(i,function(i){i.ok?(e.debug("Slack is initialized and ready to go!"),u._initialized=!0,u._initializing=!1,n.ExecuteApiMethod("rtm.start",{token:o.DefaultToken},function(n){n.ok?(e.debug("Houston, we now have RTM!!"),u.rtm=r(n.url),t.resolve()):t.reject("Failed to start RTM")})):(e.debug("Slack failed to initialize!"),u._initialized=!1,t.reject())})}else u._initialized=!1,t.reject(!1),e.debug("User does not have a slack access token");return t.promise},this.api=l.all("slack"),this.users={},this.users.items=[],
this.channels=[],this.users.getList=function(e){var t=a.defer();return u.init().then(function(){u.api.all("users").getList({limit:100,cursor:e}).then(function(e){angular.forEach(e,function(e){u.users.items.push(e)}),t.resolve(e)},t.reject)},t.reject),t.promise},this.authenticate=function(r){e.debug("Slack time. Ready, Set, Go...");var o=t.current;i.AUTH_PARAMS.state=angular.toJson({userId:r.id,currentState:o.name,currentParams:o.params}),e.debug(i),n.authorize(i.CLIENT_ID,i.AUTH_PARAMS)},this.authorize=function(e,n){var r=angular.fromJson(n.state),i=r.currentState||"app.dashboard",o=r.currentParams||{},a=function(){s.create("danger","Failed to authenticate with Slack. Please try again."),t.go(i,o)};r.userId!=e.id?a():e.post("oauth",{service:"slack",exchange_code:n.code}).then(function(n){_.extend(e,n),u.setUser(e),s.create("success","Success! Authenticated with Slack. You are good to go!"),t.go(i,o)},function(e){a()})},this.chats={},this.chats.items=[],this.chats.imHistory=function(e,t){var r=a.defer();return n.ExecuteApiMethod("im.history",{token:o.DefaultToken,channel:t,count:200},function(t){t.ok&&(u.chats.items[e].messages=u.chats.items[e].messages||[],angular.forEach(t.messages,function(t){u.chats.items[e].messages.push(t)})),r.resolve(u.chats.items[e])}),r.promise},this.chats.get=function(e){var t=a.defer();return u.init().then(function(n){u.api.all("chats").get(e).then(function(n){u.chats.items[e]=n,u.chats.imHistory(n.key,n.channel_id).then(t.resolve,t.reject)},t.reject)},t.reject),t.promise},this.chats.startDM=function(e,t){var r=a.defer(),i=-1;return angular.forEach(u.users.items,function(t,n){t.active=!1,t.username==e.username&&(i=n)}),-1==i&&(s.create("danger","Sorry, user not found for direct message."),r.reject()),t||n.ExecuteApiMethod("im.open",{token:o.DefaultToken,user:e.slack_id},function(t){t.ok?u.api.all("chats").post({channel_id:t.channel.id,user_ids:[e.user_id]}).then(function(e){u.users.items[i].active=!0,u.activeChat=u.users.items[i],r.resolve(e)}):(s.create("danger","Sorry, user not found for direct message."),r.reject())}),r.promise}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("AdminMentorsController",["$scope","ShiftHandler","$filter","$log","Restangular",function(e,t,n,r,i){function o(){angular.forEach(e.mentors,function(t){var n={a:t.name,b:t.email,c:t.gender,d:t.shirt_size,e:t.role,f:t.blurb};e.registrationArray.push(n)})}function a(){i.all("registrations/all/mentors").getList({cursor:l,limit:100}).then(function(t){s=t.meta?t.meta.more:!1,l=t.meta?t.meta.nextCursor:null,angular.forEach(t,function(t){e.mentors.push(i.restangularizeElement(e.mentors,t,"mentors",!0))}),s?getUsers():(e.getHeader(),e.exportReady=!0,r.debug("Got all attendees..."))})}var s=!0,l=null;e.mentors=i.all("registrations"),e.filename="mentors_"+n("date")(new Date,"yyyy-MM-dd"),e.registrationArray=[],e.getHeader=function(){var t={a:"Name",b:"Email",c:"Gender",d:"Shirt",e:"Role",f:"Blurb"};e.registrationArray.push(t),o(),r.debug(e.registrationArray)},a(),e.updateMentorStatus=function(e){r.debug("update mentor: "+e.name+" - new status: "+e.approval_status),e.save().then(function(t){e.approved=t.approved},function(e){return e.data.message})}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("AdminCheckinController",["$scope","$log","CheckInService",function(e,t,n){var r=function(t){n.events.list(t).then(function(t){e.events=n.events.items})};r()}]),e.controller("AdminCheckinStartController",["$scope","$log","Flash","CheckInService","event",function(e,t,n,r,i){e.event=i,e.isStarted=!1,e.data={},angular.forEach(e.event.checkinInstances,function(t){t.end&&""!=t.end||(e.isStarted=t)}),e.locationOptions=["LC, 5 MetroTech Center","RH, 6 MetroTech Center","MAGNET, 2 MetroTech Center","LaGuardia Co-op","Shanghai"],e.setLocation=function(t){e.data.location=t},e.startCheckin=function(){return e.data.location?void i.all("checkin_events").post({location:e.data.location,start:!0}).then(function(t){e.isStarted=t}):void n.create("danger","Please select a <strong>LOCATION</strong> to enable check-in.")},e.endCheckin=function(){i.all("checkin_events").post({location:e.data.location,start:!1}).then(function(t){e.isStarted=!1})}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("AdminEventsController",["$scope","$state","$log","CheckInService",function(e,t,n,r){var i=function(t){r.events.list(t).then(function(t){e.events=r.events.items})};i(),e.viewEvent=function(e){t.go("admin.events-view",{key:e.key})}}]),e.controller("AdminEventsStartController",["$scope","$log","$anchorScroll","FormProcessor","CheckInService","$state",function(e,t,n,r,i,o){e.data={name:"test"},e.submit=function(){var a=e.eventForm.openDate,s=e.eventForm.closeDate;return a.$setValidity("compare",!0),s.$setValidity("compare",!0),new Date(e.data.open_datetime)>new Date(e.data.close_datetime)&&(t.debug("here"),a.$setValidity("compare",!1),s.$setValidity("compare",!1),a.$setDirty(),s.$setDirty()),r.validate(e.eventForm)?void i.events.create(e.data).then(function(e){o.go("admin.events-edit",{key:e.key})}):void n("form-top")}}]),e.controller("AdminEventsEditController",["$scope","$log","$state","$anchorScroll","event","FormProcessor","Flash","Lightbox",function(e,t,n,r,i,o,a,s){function l(){n.go("admin.events-view",{key:e.data.key}),r(),a.create("success","Event saved successfully!")}function u(){var t=[];return angular.forEach(e.checkinRoles,function(e){if(e.role&&e.allowed){var n={};n[e.role]=e.allowed||[],t.push(n)}}),t}e.data=i,e.checkinRoles=[],e.sajFeatureOptions={multiple:!1,uploaderTitle:"Upload a Feature Image",chooserTitle:"Select a Feature Image",albumKey:e.data.key},e.openLightboxModal=function(e,t){s.openModal(e,t)},e.setAsFeature=function(t){e.data.feature=t,r(),e.submit(!0),a.create("success","Event feature updated successfully.")},e.submit=function(t){return o.validate(e.eventForm)?(e.data.checkin_roles=u(),void e.data.save().then(function(){t||l()},function(t){o.hadFailure(e.eventForm,t)})):void r("form-top")},e.addCheckinRole=function(){e.checkinRoles.push({})},e.data.checkin_roles&&e.data.checkin_roles.length>0?angular.forEach(e.data.checkin_roles,function(t){var n=Object.keys(t);n.length>0&&e.checkinRoles.push({role:n[0],allowed:t[n[0]]})}):e.addCheckinRole()}]),e.controller("AdminEventsViewController",["$scope","$log","event",function(e,t,n){function r(){angular.forEach(e.checkins,function(t){"Mentor"==t.model_type?e.totalMentors++:"Volunteer"==t.model_type?e.totalVolunteers++:e.totalAttendees++}),e.totalCheckins=e.totalAttendees+e.totalMentors+e.totalVolunteers}e.data=n,e.checkins=[],t.debug(n),e.totalCheckins=0,e.totalAttendees=0,e.totalVolunteers=0,e.totalMentors=0,e.loadMoreCheckins=function(i){n.all("checkins").getList({cursor:i}).then(function(n){angular.forEach(n,function(t){e.checkins.push(t)}),n.meta.more?e.loadMoreCheckins(n.meta.nextCursor):(r(),t.debug(e.checkins))})},e.loadMoreCheckins()}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("AdminRegistrationsController",["$scope","$filter","$log","Restangular",function(e,t,n,r){function i(){angular.forEach(e.registrations,function(t){var n={a:t.name,b:t.email,i:t.resume};e.registrationArray.push(n)})}function o(){r.all("registrations/all/attendees").getList({cursor:s,limit:100}).then(function(t){a=t.meta?t.meta.more:!1,s=t.meta?t.meta.nextCursor:null,angular.forEach(t,function(t){e.registrations.push(t)}),a?o():(e.getHeader(),e.exportReady=!0,n.debug("Got all attendees..."))})}var a=!0,s=null;e.registrations=[],e.filename="registrations_"+t("date")(new Date,"yyyy-MM-dd"),e.registrationArray=[],e.getHeader=function(){var t={a:"Name",b:"Email",i:"Resume"};e.registrationArray.push(t),i(),n.debug(e.registrationArray)},o()}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("MentorController",["$scope","Restangular","ShiftHandler","mentor",function(e,t,n,r){e.mentor=r,e.myShifts=n.updateShifts(e.mentor.new_slots),e.getShiftColor=n.getShiftColor,e.getQrCode=function(){var t="https://web.archive.org/web/20160412111801/http://hacknyu.org/checkin/"+e.mentor.key;return"http://qrickit.com/api/qr?d="+t+"&fgdcolor=000000&bgdcolor=FFFFFF&qrsize=400&t=p&e=m"},e.onClickRefresh=function(){t.all("registrations/mentors").get(e.mentor.key).then(function(t){e.mentor=t,e.myShifts=n.updateShifts(e.mentor.new_slots)})}}]),e.controller("MentorNotReadyController",["$scope","mentor",function(e,t){e.mentor=t}]),e.controller("MentorEditController",["$scope","$log","ShiftHandler","$anchorScroll","FormProcessor","Flash","mentor","AppConfig","Restangular","$state",function(e,t,n,r,i,o,a,s,l,u){function c(){r("form-top"),e.mentor.key?o.create("success",'Success, your mentor/judge pass has been updated! <a ui-sref="app.mentor-view">Get My Pass.</a>'):o.create("success","Thank you for signing up to mentor/judge for HACKNYU 2016. An email has been set to "+e.mentor.email+" with important details."),u.go("app.mentor-not-ready",{},{reload:!0})}e.roles=["Judge","Mentor","Judge & Mentor"],e.sizes=["Small","Medium","Large","X-Large","2X-Large"],e.genders=["Male","Female"],n.setDuration(1),n.setOffset(0),e.slots=n.createSlots(),e.getShiftColor=n.getShiftColor,e.resetSlots=function(){angular.forEach(e.slots,function(e){e.checked=!1}),e.updateMyShifts()},e.updateMyShifts=function(){e.myShifts=n.updateShifts(e.slots),e.slotsRequiredText=e.myShifts.length>0?"yes":null},e.mentor=a||{name:e.profile.name,email:e.user.email,phone:e.profile.phone&&e.profile.phone.length>0?e.profile.phone[0]:null,which:s.current_hackathon_id},e.mentor.new_slots&&(angular.forEach(e.mentor.new_slots,function(t){angular.forEach(e.slots,function(e){e.span===t.span&&(e.checked=!0)})}),e.updateMyShifts()),e.submit=function(t){return i.validate(e.mentorForm)?(e.mentor.new_slots=[],angular.forEach(e.slots,function(t){t.checked&&e.mentor.new_slots.push(t)}),void(e.mentor.key?e.mentor.save().then(c,function(t){i.hadFailure(e.mentorForm,t,"form-top")}):l.all("registrations").all("mentors").post(e.mentor).then(function(t){_.extend(e.mentor,t),c()},function(t){i.hadFailure(e.mentorForm,t,"form-top")}))):void r("form-top")},e.saveProfileImage=function(t){e.profile.avatar=t,o.create("success","Success, your profile photo has been updated."),e.profile.save()},e.sajProfileOptions={multiple:!1,uploaderTitle:"Upload a Profile Photo",chooserTitle:"Select a Profile Photo",albumKey:e.profile.key}}])}(),function(){"use strict";var e=angular.module("mainapp");e.factory("ShiftHandler",["$log",function(e){function t(e){var t=[];angular.forEach(e,function(e){e.checked&&t.push(angular.copy(e))});var n=-1,r=!1,i=0,o=[];return angular.forEach(t,function(e){r&&r===e.start?(o[i-1].end=e.end,o[i-1].endShort=e.endShort,o[i-1].length=o[i-1].length?o[i-1].length+1:1):(n!=e.currentDay&&(n=e.currentDay,e.header=s[n]),o.push(e),i++),r=e.end}),o}function n(){for(var e=[],t=new Date(o),n=0,r=-1;a>=t;){var l={};l.currentDay=t.getDay(),r!=l.currentDay&&(r=l.currentDay,l.header=s[r]+" slots"),l.start=t.toMyString(!0),l.startShort=t.toMyString(),l.end=t.addHours(i.duration).toMyString(!0),l.endShort=t.toMyString(),l.span=l.start+" - "+l.end,e.push(l),i.offset&&(n%2==0?t.addHours(-(i.duration-i.offset)):t.addHours(-i.offset)),n++}return e}function r(e){switch(e.length){case void 0:case 0:return"";case 1:return"two";case 2:return"three";default:return"long"}}var i=this;Date.prototype.addHours=function(e){return this.setTime(this.getTime()+60*e*60*1e3),this};var o=new Date("Feb 19, 2016 17:00:00 EST"),a=new Date("Feb 21, 2016 17:00:00 EST");i.duration=4,i.offset=2;var s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];return Date.prototype.toMyString=function(e){var t=(e?s[this.getDay()]+", ":"")+l[this.getMonth()]+" "+this.getDate(),n=(0==this.getHours()?12:this.getHours()>12?this.getHours()-12:this.getHours())+":"+("0"+this.getMinutes()).slice(-2)+" "+(this.getHours()>=12?"pm":"am");return t+": "+n},{setOffset:function(e){i.offset=e},setDuration:function(e){i.duration=e},updateShifts:t,createSlots:n,getShiftColor:r}}]),e.controller("VolunteerController",["$scope","Restangular","ShiftHandler","volunteer",function(e,t,n,r){e.volunteer=r,e.myShifts=n.updateShifts(e.volunteer.new_slots),e.getShiftColor=n.getShiftColor,e.getQrCode=function(){var t="https://web.archive.org/web/20160412111801/http://hacknyu.org/checkin/"+e.volunteer.key;return"http://qrickit.com/api/qr?d="+t+"&fgdcolor=000000&bgdcolor=FFFFFF&qrsize=400&t=p&e=m"},e.onClickRefresh=function(){t.all("registrations/volunteers").get(e.volunteer.key).then(function(t){e.volunteer=t,e.myShifts=n.updateShifts(e.volunteer.new_slots)})}}]),e.controller("VolunteerEditController",["$scope","$log","ShiftHandler","$anchorScroll","FormProcessor","Flash","volunteer","AppConfig","Restangular","$state",function(e,t,n,r,i,o,a,s,l,u){function c(){r("form-top"),u.go("app.volunteer-view",{},{reload:!0}),o.create("success","Thank you for volunteering for HACKNYU 2016. An email has been set to "+e.volunteer.email+' with your <a ui-sref="app.volunteer-view">EXCLUSIVE VOLUNTEER PASS.</a>')}e.sizes=["Small","Medium","Large","X-Large","2X-Large"],e.genders=["Male","Female"],e.printerOptions=["Yes, definitely.","No.","Maybe. I am not sure yet."],n.setDuration(1),n.setOffset(0),e.slots=n.createSlots(),e.resetSlots=function(){angular.forEach(e.slots,function(e){e.checked=!1}),e.updateMyShifts()},e.updateMyShifts=function(){e.myShifts=n.updateShifts(e.slots),e.slotsRequiredText=e.myShifts.length>0?"yes":null},e.volunteer=a||{name:e.profile.name,email:e.user.email,phone:e.profile.phone&&e.profile.phone.length>0?e.profile.phone[0]:null,which:s.current_hackathon_id},e.volunteer.new_slots&&(angular.forEach(e.volunteer.new_slots,function(t){angular.forEach(e.slots,function(e){e.span===t.span&&(e.checked=!0)})}),e.updateMyShifts()),e.getShiftColor=n.getShiftColor,e.submit=function(t){return i.validate(e.volunteerForm)?(e.volunteer.new_slots=[],angular.forEach(e.slots,function(t){t.checked&&e.volunteer.new_slots.push(t)}),void(e.volunteer.key?e.volunteer.save().then(c,function(t){i.hadFailure(e.volunteerForm,t,"form-top")}):l.all("registrations").all("volunteers").post(e.volunteer).then(function(t){_.extend(e.volunteer,t),c()},function(t){i.hadFailure(e.volunteerForm,t,"form-top")}))):void r("form-top")}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("RegistrationController",["$scope","HackNYUConstants","registration",function(e,t,n){e.registration=n,e.getQrCode=function(){var t="https://web.archive.org/web/20160412111801/http://hacknyu.org/checkin/"+e.registration.key;return"http://qrickit.com/api/qr?d="+t+"&fgdcolor=000000&bgdcolor=FFFFFF&qrsize=400&t=p&e=m"}}]),e.controller("RegistrationEditController",["$scope","$state","$anchorScroll","$log","AppConfig","Flash","Restangular","HackNYUConstants","registration","FormProcessor",function(e,t,n,r,i,o,a,s,l,u){function c(){t.go("app.registration-view",{},{reload:!0}),o.create("success","Thank you for registering for HACKNYU 2016. An email has been set to "+e.data.email+' with your <a ui-sref="app.registration-view">ALL-WEEKEND FULL-ACCESS HACKER PASS.</a>')}e.tickerList=s.TickerList,e.rsvpOptions=["Attending HACKNYU 2016","Interested","Can't Go"],e.genderOptions=["Male","Female"],e.makerOptions=["Artist","Content Provider","Front-End Developer","Back-End Developer","Hardware Hacker","Designer","Mobile Developer","Game Developer"],e.sizeOptions=["Small","Medium","Large","X-Large","2X-Large"],e.printerOptions=["Yes, definitely.","No.","Maybe. I am not sure yet."],e.data=l||{name:e.profile.name,email:e.profile.email,rsvp:e.rsvpOptions[0],which:i.current_hackathon_id,phone:e.profile.phone&&e.profile.phone.length>0?e.profile.phone[0]:null},e.driveOptions={multiple:!1,opt:{spaces:"drive",orderBy:"modifiedDate desc"}},e.submit=function(t){return u.validate(e.registrationForm)?void(e.data.key?e.data.save().then(c,function(t){u.hadFailure(e.registrationForm,t)}):a.all("registrations").all("attendees").post(e.data).then(function(e){_.extend(l,e),c()},function(t){u.hadFailure(e.registrationForm,t)})):void n("form-top")}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("ContactController",["$log","Flash","$scope",function(e,t,n){e.debug("ContactController active"),n.show={};var r={place:{is_current:!0}};n.data=angular.copy(r),n.add=function(e,t,i,o){return angular.forEach(i.$error.required,function(e){e.$setDirty()}),i.$invalid?void(i.error="Please check the form below for errors."):(o?(n.profile[e]=n.profile[e]||[],n.profile[e].push(t)):n.profile[e]=t,void n.profile.save().then(function(){n.data[e]=angular.copy(r[e]),i.$setPristine(),n.show[e]=!1}))},n["delete"]=function(e,t,r){r?_.remove(n.profile[e],function(e){return e==t}):n.profile[e]=null,n.profile.save()},n.updateProfile=function(e,t,r){-1!=r?n.profile[e][r]=t:n.profile[e]=t,n.profile.save().then(null,function(e){return e.data.message})}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("OverviewController",["$log","Flash","$state","$scope",function(e,t,n,r){e.debug("OverviewController active"),r.editMode=!1,r.details=!1,r.showProfileItem=function(){n.go(n.current.name,{about:"work-education"})}}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("WorkEducationController",["$log","Flash","$scope","ProfilesService","Restangular","SajFacebook",function(e,t,n,r,i,o){e.debug("WorkEducationController active"),n.itemTypes=[{name:"workplaces",title:"Work History",header:"Add a new workplace",templateUrl:"/p/modules/mainapp/profiles/partials/work-form.tmpl.html",details:n.details},{name:"colleges",title:"Colleges",header:"Add a college",templateUrl:"/p/modules/mainapp/profiles/partials/college-form.tmpl.html",details:n.details},{name:"schools",title:"High Schools",header:"Add a high school",templateUrl:"/p/modules/mainapp/profiles/partials/school-form.tmpl.html",details:n.details}],angular.forEach(["workplaces","colleges","schools"],function(e){r.customRestangular().restangularizeCollection(n.profile,n.profile[e]||[],e)}),n.addProfileItem=function(e,t){return n.profile[e]||(n.profile[e]=[]),t=t||{is_present:!0},t.$edit=!0,n.profile[e].push(t),t},n.editProfileItem=function(e,t){t=i.restangularizeElement(null,t,e,!0),t.$edit=!0},n.saveProfileItem=function(e,t,r){t.$error=!1,t.key?t.save().then(function(e){_.extend(t,e),t.$edit=!1,r&&r.$setPristine()},function(e){t.$error=e.data}):n.profile[e].post(t).then(function(e){_.extend(t,e),t.$edit=!1,r&&r.$setPristine()},function(e){t.$error=e.data})},n.dismissProfileItem=function(t,r,i){e.debug(r),r.key?r.get().then(function(e){_.extend(r,e),r.$edit=!1,i&&i.$setPristine()}):(_.remove(n.profile[t],function(e){return e==r}),i&&i.$setPristine())},n.deleteProfileItem=function(e,t){t.key?t.remove().then(function(){t.key=null,n.dismissProfileItem(e,t)},function(e){t.$error=e.data}):n.dismissProfileItem(e,t)}}])}(),function(){"use strict";var e=angular.module("core");e.controller("DriveUploaderController",["$scope","$log","$element","GoogleIntegration","$uibModal",function(e,t,n,r,i){e.showDrive=function(){r.login().then(function(){var t=i.open({animation:!0,size:"lg",templateUrl:"modalDriveBrowser.html",controller:"ModalDriveBrowserController",resolve:{options:e.options}});t.result.then(function(t){e.options.multiple?angular.forEach(t,function(t){e.ngModel||(e.ngModel=[]),e.ngModel.push(t)}):t&&t.length>=0&&(e.ngModel=t[0].webContentLink)})["finally"](function(){e.options.opt.pageToken=null})})}}]),e.controller("ModalDriveBrowserController",["$scope","$log","$uibModalInstance","GoogleIntegration","$timeout","Flash","options",function(e,t,n,r,i,o,a){e.options=a||{},e.files=[],e.getFiles=function(){r.getFiles(e.options.opt).then(function(t){e.files=_.union(e.files,t.items),e.options.opt.pageToken=t.nextPageToken})},e.getFiles(e.options.opt),e.inputFileChanged=function(n){e.fileSelected=n.name,e.uploading=!0,r.uploadFile(n).then(function(t){e.files.push(t),e.selectFile(t),i(function(){r.getFile(t).then(function(e){t.thumbnailLink=e.thumbnailLink})},5e3)},function(e){o.create("danger",e),t.debug(e)})["finally"](function(){e.uploading=!1})},e.selectFile=function(t){t.active?t.active=!1:(e.options.multiple||angular.forEach(e.files,function(e){e.active=!1}),t.active=!0)},e.deleteFile=function(t){r.deleteFile(t).then(function(){_.remove(e.files,t)})},e.submit=function(){var t=[];angular.forEach(e.files,function(e){e.active&&t.push(e)}),n.close(t)},e.cancel=function(){n.dismiss()}}]),e.directive("driveUploader",function(){return{transclude:!0,replace:!0,controller:"DriveUploaderController",controllerAs:"hacknyu",templateUrl:function(e,t){return t.templateUrl||"/p/modules/core/directives/drive-uploader/drive-uploader.tmpl.html"},scope:{ngModel:"=",options:"=",isList:"@"}}})}(),function(){"use strict";var e=angular.module("core");e.controller("HackNyuModalController",["$scope","$uibModalInstance","data",function(e,t,n){e.data=n,e.negative=function(){t.dismiss(!1)},e.positive=function(){t.close(!0)}}]),e.directive("hackNyuModal",function(){return{restrict:"A",replace:!0,controller:["$scope","$uibModal",function(e,t){e.openModal=function(){var n=t.open({animation:!0,templateUrl:"hackNyuModal.html",controller:"HackNyuModalController",size:e.size||"lg",resolve:{data:function(){return{header:e.header,bodyTmpl:e.bodyTmpl}}}});n.result.then(function(t){e.checkModel=t},function(t){e.checkModel=t})}}],templateUrl:function(e,t){return t.templateUrl||"/p/modules/core/directives/hacknyu-modal/hacknyu-modal.tmpl.html"},scope:{size:"@",linkText:"@",checkModel:"=",header:"@",bodyTmpl:"@",form:"=",isNotRequired:"="}}})}(),function(){"use strict";var e=angular.module("core");e.directive("imageUpload",["$http",function(e){var t=function(t,n,r,i){t.getHelperText=function(){return t.placeholder?t.placeholder:"Square (1:1) images work best."},t.imageSelected=function(n){t.error=!1,null!=n&&null!=n[0]&&(t.form.$dirty=!0,t.form.$pristine=!1,t.imageUploading=!0,t.user.post("uploadurl",t.options).then(function(r){var i=new FormData;i.append("file",n[0]),e.post(r.upload_url,i,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(e){t.imageUrl=e.url||"/images/"+e.blob_key,t.onChange(),t.imageUploading=!1}).error(function(e){t.error={animation:"shake",message:"Failed to upload file."},t.imageUploading=!1})},function(e){t.error={animation:"shake",message:"Failed to get upload url."},t.imageUploading=!1}))}};return{link:t,restrict:"E",replace:!0,scope:{imageUrl:"=",form:"=",user:"=",placeholder:"@",onChange:"&",options:"="},templateUrl:function(e,t){return t.templateUrl||"/p/modules/core/directives/image-upload/image-upload.view.html"}}}])}(),function(){"use strict";angular.module("core")}(),function(){"use strict";var e=angular.module("core");e.controller("SajDialogController",["$scope","$log","$uibModalInstance","options",function(e,t,n,r){r=r||{},e.options=r,e.cancel=function(){n.dismiss()},e.submit=function(){n.close()}}]),e.provider("SajDialog",function(){var e={options:{title:"Dialog",size:"md"},$get:["$q","$uibModal",function(t,n){var r={};return r._modalInstance=null,r.open=function(i){var o=t.defer();return i=angular.extend({},e.options,i),r._modalInstance=n.open({templateUrl:"/p/modules/core/directives/saj-dialog/saj-dialog.tmpl.html",controller:"SajDialogController",size:i.size,resolve:{options:i}}),r._modalInstance.result.then(function(e){o.resolve(e)},o.reject),o.promise},r}]};return e})}(),function(){"use strict";var e=angular.module("core");e.directive("sajDynamicController",["$compile","$parse",function(e,t){return{restrict:"A",terminal:!0,priority:1e5,link:function(n,r){var i=t(r.attr("saj-dynamic-controller"))(n);r.removeAttr("saj-dynamic-controller"),r.attr("ng-controller",i),e(r)(n)}}}])}(),function(){"use strict";var e=angular.module("core");e.controller("SajEmailController",["$scope","$log","FormProcessor","$uibModalInstance","options",function(e,t,n,r,i){i.data=i.data||{},e.options=i,e.data=angular.extend(i.data,{name:i.recipientName,email:i.recipientEmail}),e.cancel=function(){r.dismiss()},e.submit=function(){if(n.validate(e.emailForm)){var t={recipient_name:e.data.name,recipient_email:e.data.email,message:e.data.message};r.close(t)}}}]),e.provider("SajEmail",function(){var e={options:{title:"Send an email",size:"lg"},$get:["$q","$uibModal","$log",function(t,n,r){var i={};return i._modalInstance=null,i.open=function(r){var o=t.defer();return r=angular.extend({},e.options,r),i._modalInstance=n.open({templateUrl:"/p/modules/core/directives/saj-email/saj-email.tmpl.html",controller:"SajEmailController",size:r.size,resolve:{options:r}}),i._modalInstance.result.then(function(e){o.resolve(e)},o.reject),o.promise},i}]};return e})}(),function(){"use strict";var e=angular.module("core");e.directive("ngEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.ngEnter||n.ngClick,{$event:t})}),t.preventDefault())})}})}(),function(){"use strict";var e=angular.module("core");e.directive("flipClock",["$parse",function(e){return{replace:!0,template:"<div></div>",restrict:"E",scope:{time:"="},link:function(e,t,n){var r,i={autoStart:"true",countdown:"true",clockFace:"dailyCounter"};r=t.FlipClock(e.time,i)}}}])}(),function(){"use strict";var e=angular.module("core");e.directive("sajAvatar",["$log",function(e){return{templateUrl:"/p/modules/core/directives/saj-image/saj-avatar.tmpl.html",link:function(e,t,n){e.getListLength=function(){switch(e.sajList.length){case 0:return"zero";case 1:return"one";case 2:return"two";default:return"three"}}},replace:!0,scope:{sajList:"=",sajKey:"@",sajClass:"@"}}}])}(),function(){"use strict";var e=angular.module("core");e.directive("sajImage",["$log","$parse","$exceptionHandler","PhotosService","SajImageUpload","SajImageChooser",function(e,t,n,r,i,o){return{template:'<div class="saj-image {{class}}"><div class="btn-group" uib-dropdown ng-click="$event.stopPropagation()" is-open="screenshotsButton.isopen"><button id="screenshot-button" type="button" class="btn btn-default btn-lg" uib-dropdown-toggle><ng-transclude></ng-transclude> <span class="caret"></span></button><ul uib-dropdown-menu role="menu" aria-labelledby="screenshot-button"><li role="menuitem"><a href="" ng-click="uploadImages()"><i class="fa fa-plus"></i> Upload Image</a></li><li role="menuitem"><a href="" ng-click="chooseImages()"><i class="fa fa-photo"></i> Choose from My Photos</a></li></ul></div></div>',transclude:!0,scope:{options:"=",ngModel:"=",asLink:"@",notArray:"@",afterSave:"&","class":"@"},link:function(t,a,s){function l(n){t.notArray?Object.keys(n).length>0?t.asLink?t.ngModel=r.getPhotoUrl(n[Object.keys(n)[0]]):t.ngModel=n[Object.keys(n)[0]]:(e.error("No files in image result..."),e.error(n)):(t.ngModel=t.ngModel||[],angular.forEach(n,function(n){t.asLink?t.ngModel.push(r.getPhotoUrl(n)):t.ngModel.push(n),e.debug(n)})),t.afterSave&&!t.notArray?t.afterSave({image:n}):t.afterSave&&t.afterSave({image:n[Object.keys(n)[0]]})}var u=t.options||{};u.albumKey||n(new Error("Assign an albumKey"),[]),t.uploadImages=function(){i.open({title:u.uploaderTitle||"Upload Photo",multiple:u.multiple,image:{album_key:u.albumKey,album_name:u.albumName}}).then(l)},t.chooseImages=function(){o.open({title:u.chooserTitle||"Select Photos",multiple:u.multiple}).then(l)}}}}])}(),function(){"use strict";var e=angular.module("core");e.controller("SajImageChooserController",["$scope","$log","PhotosService","$uibModalInstance","Flash","options",function(e,t,n,r,i,o){function a(){angular.forEach(e.files,function(e){e.$selected=!1}),angular.forEach(e.albums,function(e){angular.forEach(e.photos,function(e){e.$selected=!1})})}e.options=o,e.tabs={albums:{active:!0},photos:{}},e.albums=n.albums,e.moreAlbums=n.moreAlbums,e.selectedAlbum=null,e.photos=n.photos,e.morePhotos=n.morePhotos,e.fetchAlbums=function(){e.isLoading=!0,n.listAlbums().then(function(){e.albums=n.albums,e.moreAlbums=n.moreAlbums},function(e){e.data&&i.create("danger",e.data.description)})["finally"](function(){e.isLoading=!1})},n.albumsFetchedInit||e.fetchAlbums(),e.fetchPhotos=function(){e.isLoading=!0,n.listPhotos().then(function(){e.photos=n.photos,e.morePhotos=n.morePhotos},function(e){e.data&&i.create("danger",e.data.description)})["finally"](function(){e.isLoading=!1})},n.photosFetchedInit||e.fetchPhotos(),e.cancel=function(e){a(),r.dismiss(e)},e.submit=function(){var t={};return angular.forEach(e.files,function(e){e.$selected&&(t[e.key]=e),e.$selected=!1}),angular.forEach(e.albums,function(e){angular.forEach(e.photos,function(e){e.$selected&&(t[e.key]=e),e.$selected=!1})}),0==t.length?void(e.error="No file selected"):void r.close(t)},e.selectAlbum=function(r){e.selectedAlbum=r,null!==r&&(t.debug("select album: "+r),e.albums[r]&&e.albums[r].fetchedInit||(t.debug("fetching photos in this album..."),n.listPhotos(r).then(function(){e.albums[r].photos=n.albums[r].photos,e.albums[r].more=n.albums[r].more,t.debug(e.albums[r])},function(e){e.data&&i.create("danger",e.data.description)})["finally"](function(){e.isLoading=!1})))},e.selectFile=function(t){if(t.$selected){t.$selected=!1;var n=[];angular.forEach(e.photos,function(e){e.$selected&&n.push(e)}),angular.forEach(e.albums,function(e){e.photos&&angular.forEach(e.photos,function(e){e.$selected&&n.push(e)})}),0==n.length&&(e.isChoosePhotoVisible=!1)}else o.multiple||(angular.forEach(e.photos,function(e){e.$selected=!1}),angular.forEach(e.albums,function(e){e.photos&&angular.forEach(e.photos,function(e){e.$selected=!1})})),t.$selected=!0,e.isChoosePhotoVisible=!0},e.getFileUrl=n.getPhotoUrl}]),e.provider("SajImageChooser",function(){var e={options:{},$get:["$q","$uibModal",function(t,n){var r={};return r._modalInstance=null,r.open=function(i){var o=t.defer();return i=angular.extend({},e.options,i),r._modalInstance=n.open({templateUrl:"/p/modules/core/directives/saj-image-chooser/saj-image-chooser.tmpl.html",controller:"SajImageChooserController",size:"lg",resolve:{options:i}}),r._modalInstance.result.then(function(e){o.resolve(e)},o.reject),o.promise},r}]};return e})}(),function(){"use strict";var e=angular.module("core");e.controller("SajImageUploadController",["$scope","$log","PhotosService","$uibModalInstance","Flash","$q","options",function(e,t,n,r,i,o,a){function s(){angular.forEach(e.files,function(e){e.$selected=!1})}e.options=a,e.files=[];var l=[];e.isLoading=!1,e.uploadFiles=function(t){if(e.isLoading=!0,t&&t.length)for(var r=0;r<t.length;r++)!function(r){var o=t[r],s=n.upload(o,a.image);s.then(function(t){e.files.push(t),e.selectFile(t)},function(e){i.create("danger",e.data.description)}),l.push(s)}(r);o.all(l)["finally"](function(){e.isLoading=!1})},e.cancel=function(){s(),r.dismiss()},e.submit=function(){var t=[];return angular.forEach(e.files,function(e){e.$selected&&t.push(e)}),0==t.length?void(e.error="No file selected"):void r.close(t)},e.selectFile=function(t){if(t.$selected){t.$selected=!1;var n=[];angular.forEach(e.files,function(e){e.$selected&&n.push(e)}),0==n.length&&(e.isChoosePhotoVisible=!1)}else a.multiple||angular.forEach(e.files,function(e){e.$selected=!1}),t.$selected=!0,e.isChoosePhotoVisible=!0},e.getFileUrl=n.getPhotoUrl,e.isChoosePhotoVisible=!1}]),e.provider("SajImageUpload",function(){var e={options:{},$get:["$q","$uibModal",function(t,n){var r={};return r._modalInstance=null,r.open=function(i){var o=t.defer();return i=angular.extend({},e.options,i),r._modalInstance=n.open({templateUrl:"/p/modules/core/directives/saj-image-upload/saj-image-upload.tmpl.html",controller:"SajImageUploadController",size:"lg",resolve:{options:i}}),r._modalInstance.result.then(function(e){o.resolve(e)},o.reject),o.promise},r}]};return e})}(),function(){var e=angular.module("core");e.directive("sajCheckboxInput",function(){return{transclude:!0,templateUrl:"/p/modules/core/directives/saj-inputs/saj-checkbox-input.tmpl.html",scope:{sajModel:"=",sajLabel:"@",
sajForm:"=",sajInputName:"@",sajRequired:"=",sajHelpBlock:"@"}}}),e.directive("sajSelectInput",function(){return{transclude:!0,templateUrl:"/p/modules/core/directives/saj-inputs/saj-select-input.tmpl.html",scope:{sajModel:"=",sajLabel:"@",sajForm:"=",sajOptions:"=",sajInputName:"@",sajRequired:"=",sajHelpBlock:"@"}}}),e.directive("sajCheckboxMultiInput",function(){return{transclude:!1,templateUrl:"/p/modules/core/directives/saj-inputs/saj-checkbox-multi-input.tmpl.html",scope:{sajModel:"=",sajLabel:"@",sajForm:"=",sajInputName:"@",sajRequired:"=",sajHelpBlock:"@",sajOptions:"="},link:function(e,t,n){e.onClickItem=function(t){e.sajModel||(e.sajModel=[]);var n=e.sajModel.indexOf(t);n>-1?e.sajModel.splice(n,1):(e.sajModel.push(t),e.sajForm[e.sajInputName].$setValidity("required",!0))}}}}),e.directive("sajTextInput",function(){return{transclude:!0,templateUrl:"/p/modules/core/directives/saj-inputs/saj-text-input.tmpl.html",scope:{sajModel:"=",sajLabel:"@",sajForm:"=",sajInputName:"@",sajInputType:"@",sajRequired:"=",sajHelpBlock:"@",sajPlaceholder:"@",sajLargeInput:"@",sajMaxlength:"@",sajAddonColor:"@",sajAddonIcon:"@"}}}),e.directive("sajTextareaInput",function(){return{transclude:!0,templateUrl:"/p/modules/core/directives/saj-inputs/saj-textarea-input.tmpl.html",scope:{sajModel:"=",sajLabel:"@",sajForm:"=",sajInputName:"@",sajRows:"@",sajRequired:"=",sajHelpBlock:"@",sajPlaceholder:"@",sajLargeInput:"@"}}}),e.directive("sajDatePicker",["$log",function(e){return{transclude:!0,templateUrl:"/p/modules/core/directives/saj-inputs/saj-date-picker.tmpl.html",link:function(e,t,n){e.timeChanged=function(t){e.sajForm[e.sajInputName].$setValidity("compare",!0),e.sajModel=t.toISOString()},e.hstep=1,e.mstep=15,e.sajModel?(e.myDateTime=new Date(e.sajModel),e.timeChanged(e.myDateTime)):(e.myDateTime=new Date,e.myDateTime.setMinutes(0),e.myDateTime.setSeconds(0),e.timeChanged(e.myDateTime))},scope:{sajModel:"=",sajLabel:"@",sajForm:"=",sajInputName:"@",sajRequired:"=",sajHelpBlock:"@",sajPlaceholder:"@",sajLargeInput:"@",sajColor:"@",sajTimePicker:"@",sajCompareName:"@",sajCompareSymbol:"@"}}}]),e.directive("sajTagsInput",function(){return{transclude:!0,templateUrl:"/p/modules/core/directives/saj-inputs/saj-tags-input.tmpl.html",scope:{sajModel:"=",sajLabel:"@",sajForm:"=",sajInputName:"@",sajRequired:"=",sajHelpBlock:"@",sajAddonColor:"@",sajAddonIcon:"@",sajPlaceholder:"@",sajLargeInput:"@"}}}),e.directive("sajRadioInput",function(){return{transclude:!0,controller:["$scope",function(e){e.select={text:e.sajModel},e.selectOption=function(t){e.sajModel=t}}],templateUrl:"/p/modules/core/directives/saj-inputs/saj-radio-input.tmpl.html",scope:{sajModel:"=",sajLabel:"@",sajForm:"=",sajOptions:"=",sajInputName:"@",sajRequired:"=",sajHelpBlock:"@"}}})}(),function(){var e=angular.module("core");e.directive("sajTickerScrambler",["$log",function(e){return{restrict:"A",link:function(e,t){t.TickerScrambler({list:e.list,pause:2500})},scope:{list:"="}}}])}(),window.jQuery&&!function(e){e.fn.TickerScrambler=function(t){return this.each(function(){e(this).data("TickerScrambler",new TickerScrambler(e(this)[0],t))})}}(window.jQuery),function(){"use strict";var e=angular.module("mainapp");e.controller("AdminVolunteersController",["$scope","$log","$filter","Restangular","ShiftHandler",function(e,t,n,r,i){function o(){r.all("registrations/all/volunteers").getList({cursor:s,limit:100}).then(function(t){a=t.meta?t.meta.more:!1,s=t.meta?t.meta.nextCursor:null,angular.forEach(t,function(t){e.volunteers.push(t)}),a?o():(e.getHeader(),e.exportReady=!0)})}var a=!0,s=null;e.volunteers=[],e.filename="volunteers_"+n("date")(new Date,"yyyy-MM-dd"),e.volunteerArray=[];var l="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az".split(","),u=[];e.getHeader=function(){i.setDuration(1),i.setOffset(0),u=i.createSlots();var n={a:""};angular.forEach(u,function(e,t){n[l[t+1]]=e.startShort,e.index=t+1}),e.volunteerArray.push(n),c(),t.debug(e.volunteerArray)};var c=function(){angular.forEach(e.volunteers,function(t){var n={};angular.forEach(l,function(e){n[e]=""}),n.a=t.name,angular.forEach(t.new_slots,function(e){angular.forEach(u,function(r){r.start==e.start&&r.end==e.end&&(n[l[r.index]]=t.name)})}),e.volunteerArray.push(n)})};o()}])}(),function(){"use strict";var e=angular.module("mainapp");e.controller("AdminUsersController",["$scope","$filter","$log","$q","SajDialog","Restangular",function(e,t,n,r,i,o){function a(){angular.forEach(e.users,function(t){var n={a:t.profile.name,b:t.email,c:t.role||"Participant"};e.registrationArray.push(n)})}function s(){o.all("users").getList({cursor:u,limit:100}).then(function(t){l=t.meta?t.meta.more:!1,u=t.meta?t.meta.nextCursor:null,angular.forEach(t,function(t){e.users.push(t)}),l?s():(e.getHeader(),e.exportReady=!0,n.debug("Got all attendees..."))})}var l=!0,u=null;e.users=[],e.filename="users_"+t("date")(new Date,"yyyy-MM-dd"),e.registrationArray=[],e.getHeader=function(){var t={a:"Name",b:"Email",c:"Role"};e.registrationArray.push(t),a(),n.debug(e.registrationArray)},s(),e.updateUser=function(e,t,i){var o=r.defer();return e[t]=i,e.save().then(o.resolve,function(e){n.debug(e.data.message),o.reject(e.data.message)}),o.promise},e.confirmUpdate=function(t,n,o){var a=r.defer();return i.open({message:"Are you sure you want to change "+t.profile.name+"'s "+n+"?",buttons:{yes:{label:"Change "+n},no:{label:"Cancel"}}}).then(function(){t[n]=o,e.updateUser(t).then(a.resolve,a.reject)},a.reject),a.promise},e.resendVerification=function(e){i.open({message:"Are you sure you want to resend a verification email to "+e.profile.name+"?",buttons:{yes:{label:"Re-send Verification"},no:{label:"Cancel"}}}).then(function(){e.all("resend-verification").post().then(function(t){e.verified=!1})})}}])}();

}
/*
     FILE ARCHIVED ON 11:18:01 Apr 12, 2016 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 23:16:56 Jan 02, 2023.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 820.721
  exclusion.robots: 0.099
  exclusion.robots.policy: 0.09
  RedisCDXSource: 7.593
  esindex: 0.008
  LoadShardBlock: 789.595 (3)
  PetaboxLoader3.resolve: 1103.376 (3)
  PetaboxLoader3.datanode: 133.214 (4)
  CDXLines.iter: 20.366 (3)
  load_resource: 469.13
*/